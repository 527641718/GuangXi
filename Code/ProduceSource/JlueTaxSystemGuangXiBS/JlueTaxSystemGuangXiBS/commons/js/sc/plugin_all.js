;
/**
 * JQuery zTree core v3.5.15
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Date: 2013-10-15
 */
(function(p){var G,H,I,J,K,L,r={},u={},v={},M={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],
otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},w=[function(b){var a=b.treeObj,c=e.event;a.bind(c.NODECREATED,function(a,c,g){j.apply(b.callback.onNodeCreated,
[a,c,g])});a.bind(c.CLICK,function(a,c,g,l,h){j.apply(b.callback.onClick,[c,g,l,h])});a.bind(c.EXPAND,function(a,c,g){j.apply(b.callback.onExpand,[a,c,g])});a.bind(c.COLLAPSE,function(a,c,g){j.apply(b.callback.onCollapse,[a,c,g])});a.bind(c.ASYNC_SUCCESS,function(a,c,g,l){j.apply(b.callback.onAsyncSuccess,[a,c,g,l])});a.bind(c.ASYNC_ERROR,function(a,c,g,l,h,e){j.apply(b.callback.onAsyncError,[a,c,g,l,h,e])})}],x=[function(b){var a=e.event;b.treeObj.unbind(a.NODECREATED).unbind(a.CLICK).unbind(a.EXPAND).unbind(a.COLLAPSE).unbind(a.ASYNC_SUCCESS).unbind(a.ASYNC_ERROR)}],
y=[function(b){var a=h.getCache(b);a||(a={},h.setCache(b,a));a.nodes=[];a.doms=[]}],z=[function(b,a,c,d,f,g){if(c){var l=h.getRoot(b),e=b.data.key.children;c.level=a;c.tId=b.treeId+"_"+ ++l.zId;c.parentTId=d?d.tId:null;c.open=typeof c.open=="string"?j.eqs(c.open,"true"):!!c.open;c[e]&&c[e].length>0?(c.isParent=!0,c.zAsync=!0):(c.isParent=typeof c.isParent=="string"?j.eqs(c.isParent,"true"):!!c.isParent,c.open=c.isParent&&!b.async.enable?c.open:!1,c.zAsync=!c.isParent);c.isFirstNode=f;c.isLastNode=
g;c.getParentNode=function(){return h.getNodeCache(b,c.parentTId)};c.getPreNode=function(){return h.getPreNode(b,c)};c.getNextNode=function(){return h.getNextNode(b,c)};c.isAjaxing=!1;h.fixPIdKeyValue(b,c)}}],s=[function(b){var a=b.target,c=h.getSetting(b.data.treeId),d="",f=null,g="",l="",i=null,n=null,k=null;if(j.eqs(b.type,"mousedown"))l="mousedown";else if(j.eqs(b.type,"mouseup"))l="mouseup";else if(j.eqs(b.type,"contextmenu"))l="contextmenu";else if(j.eqs(b.type,"click"))if(j.eqs(a.tagName,"span")&&
a.getAttribute("treeNode"+e.id.SWITCH)!==null)d=j.getNodeMainDom(a).id,g="switchNode";else{if(k=j.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+e.id.A}]))d=j.getNodeMainDom(k).id,g="clickNode"}else if(j.eqs(b.type,"dblclick")&&(l="dblclick",k=j.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+e.id.A}])))d=j.getNodeMainDom(k).id,g="switchNode";if(l.length>0&&d.length==0&&(k=j.getMDom(c,a,[{tagName:"a",attrName:"treeNode"+e.id.A}])))d=j.getNodeMainDom(k).id;if(d.length>0)switch(f=h.getNodeCache(c,d),g){case "switchNode":f.isParent?
j.eqs(b.type,"click")||j.eqs(b.type,"dblclick")&&j.apply(c.view.dblClickExpand,[c.treeId,f],c.view.dblClickExpand)?i=G:g="":g="";break;case "clickNode":i=H}switch(l){case "mousedown":n=I;break;case "mouseup":n=J;break;case "dblclick":n=K;break;case "contextmenu":n=L}return{stop:!1,node:f,nodeEventType:g,nodeEventCallback:i,treeEventType:l,treeEventCallback:n}}],A=[function(b){var a=h.getRoot(b);a||(a={},h.setRoot(b,a));a[b.data.key.children]=[];a.expandTriggerFlag=!1;a.curSelectedList=[];a.noSelection=
!0;a.createdNodes=[];a.zId=0;a._ver=(new Date).getTime()}],B=[],C=[],D=[],E=[],F=[],h={addNodeCache:function(b,a){h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=a},getNodeCacheId:function(b){return b.substring(b.lastIndexOf("_")+1)},addAfterA:function(b){C.push(b)},addBeforeA:function(b){B.push(b)},addInnerAfterA:function(b){E.push(b)},addInnerBeforeA:function(b){D.push(b)},addInitBind:function(b){w.push(b)},addInitUnBind:function(b){x.push(b)},addInitCache:function(b){y.push(b)},addInitNode:function(b){z.push(b)},
addInitProxy:function(b,a){a?s.splice(0,0,b):s.push(b)},addInitRoot:function(b){A.push(b)},addNodesData:function(b,a,c){var d=b.data.key.children;a[d]||(a[d]=[]);if(a[d].length>0)a[d][a[d].length-1].isLastNode=!1,i.setNodeLineIcos(b,a[d][a[d].length-1]);a.isParent=!0;a[d]=a[d].concat(c)},addSelectedNode:function(b,a){var c=h.getRoot(b);h.isSelectedNode(b,a)||c.curSelectedList.push(a)},addCreatedNode:function(b,a){(b.callback.onNodeCreated||b.view.addDiyDom)&&h.getRoot(b).createdNodes.push(a)},addZTreeTools:function(b){F.push(b)},
exSetting:function(b){p.extend(!0,M,b)},fixPIdKeyValue:function(b,a){b.data.simpleData.enable&&(a[b.data.simpleData.pIdKey]=a.parentTId?a.getParentNode()[b.data.simpleData.idKey]:b.data.simpleData.rootPId)},getAfterA:function(b,a,c){for(var d=0,f=C.length;d<f;d++)C[d].apply(this,arguments)},getBeforeA:function(b,a,c){for(var d=0,f=B.length;d<f;d++)B[d].apply(this,arguments)},getInnerAfterA:function(b,a,c){for(var d=0,f=E.length;d<f;d++)E[d].apply(this,arguments)},getInnerBeforeA:function(b,a,c){for(var d=
0,f=D.length;d<f;d++)D[d].apply(this,arguments)},getCache:function(b){return v[b.treeId]},getNextNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),f=0,g=d[c].length-1;f<=g;f++)if(d[c][f]===a)return f==g?null:d[c][f+1];return null},getNodeByParam:function(b,a,c,d){if(!a||!c)return null;for(var f=b.data.key.children,g=0,l=a.length;g<l;g++){if(a[g][c]==d)return a[g];var e=h.getNodeByParam(b,a[g][f],c,d);if(e)return e}return null},getNodeCache:function(b,
a){if(!a)return null;var c=v[b.treeId].nodes[h.getNodeCacheId(a)];return c?c:null},getNodeName:function(b,a){return""+a[b.data.key.name]},getNodeTitle:function(b,a){return""+a[b.data.key.title===""?b.data.key.name:b.data.key.title]},getNodes:function(b){return h.getRoot(b)[b.data.key.children]},getNodesByParam:function(b,a,c,d){if(!a||!c)return[];for(var f=b.data.key.children,g=[],l=0,e=a.length;l<e;l++)a[l][c]==d&&g.push(a[l]),g=g.concat(h.getNodesByParam(b,a[l][f],c,d));return g},getNodesByParamFuzzy:function(b,
a,c,d){if(!a||!c)return[];for(var f=b.data.key.children,g=[],d=d.toLowerCase(),l=0,e=a.length;l<e;l++)typeof a[l][c]=="string"&&a[l][c].toLowerCase().indexOf(d)>-1&&g.push(a[l]),g=g.concat(h.getNodesByParamFuzzy(b,a[l][f],c,d));return g},getNodesByFilter:function(b,a,c,d,f){if(!a)return d?null:[];for(var g=b.data.key.children,e=d?null:[],i=0,n=a.length;i<n;i++){if(j.apply(c,[a[i],f],!1)){if(d)return a[i];e.push(a[i])}var k=h.getNodesByFilter(b,a[i][g],c,d,f);if(d&&k)return k;e=d?k:e.concat(k)}return e},
getPreNode:function(b,a){if(!a)return null;for(var c=b.data.key.children,d=a.parentTId?a.getParentNode():h.getRoot(b),f=0,g=d[c].length;f<g;f++)if(d[c][f]===a)return f==0?null:d[c][f-1];return null},getRoot:function(b){return b?u[b.treeId]:null},getRoots:function(){return u},getSetting:function(b){return r[b]},getSettings:function(){return r},getZTreeTools:function(b){return(b=this.getRoot(this.getSetting(b)))?b.treeTools:null},initCache:function(b){for(var a=0,c=y.length;a<c;a++)y[a].apply(this,
arguments)},initNode:function(b,a,c,d,f,g){for(var e=0,h=z.length;e<h;e++)z[e].apply(this,arguments)},initRoot:function(b){for(var a=0,c=A.length;a<c;a++)A[a].apply(this,arguments)},isSelectedNode:function(b,a){for(var c=h.getRoot(b),d=0,f=c.curSelectedList.length;d<f;d++)if(a===c.curSelectedList[d])return!0;return!1},removeNodeCache:function(b,a){var c=b.data.key.children;if(a[c])for(var d=0,f=a[c].length;d<f;d++)arguments.callee(b,a[c][d]);h.getCache(b).nodes[h.getNodeCacheId(a.tId)]=null},removeSelectedNode:function(b,
a){for(var c=h.getRoot(b),d=0,f=c.curSelectedList.length;d<f;d++)if(a===c.curSelectedList[d]||!h.getNodeCache(b,c.curSelectedList[d].tId))c.curSelectedList.splice(d,1),d--,f--},setCache:function(b,a){v[b.treeId]=a},setRoot:function(b,a){u[b.treeId]=a},setZTreeTools:function(b,a){for(var c=0,d=F.length;c<d;c++)F[c].apply(this,arguments)},transformToArrayFormat:function(b,a){if(!a)return[];var c=b.data.key.children,d=[];if(j.isArray(a))for(var f=0,g=a.length;f<g;f++)d.push(a[f]),a[f][c]&&(d=d.concat(h.transformToArrayFormat(b,
a[f][c])));else d.push(a),a[c]&&(d=d.concat(h.transformToArrayFormat(b,a[c])));return d},transformTozTreeFormat:function(b,a){var c,d,f=b.data.simpleData.idKey,g=b.data.simpleData.pIdKey,e=b.data.key.children;if(!f||f==""||!a)return[];if(j.isArray(a)){var h=[],i=[];for(c=0,d=a.length;c<d;c++)i[a[c][f]]=a[c];for(c=0,d=a.length;c<d;c++)i[a[c][g]]&&a[c][f]!=a[c][g]?(i[a[c][g]][e]||(i[a[c][g]][e]=[]),i[a[c][g]][e].push(a[c])):h.push(a[c]);return h}else return[a]}},m={bindEvent:function(b){for(var a=0,
c=w.length;a<c;a++)w[a].apply(this,arguments)},unbindEvent:function(b){for(var a=0,c=x.length;a<c;a++)x[a].apply(this,arguments)},bindTree:function(b){var a={treeId:b.treeId},c=b.treeObj;b.view.txtSelectedEnable||c.bind("selectstart",function(a){a=a.originalEvent.srcElement.nodeName.toLowerCase();return a==="input"||a==="textarea"}).css({"-moz-user-select":"-moz-none"});c.bind("click",a,m.proxy);c.bind("dblclick",a,m.proxy);c.bind("mouseover",a,m.proxy);c.bind("mouseout",a,m.proxy);c.bind("mousedown",
a,m.proxy);c.bind("mouseup",a,m.proxy);c.bind("contextmenu",a,m.proxy)},unbindTree:function(b){b.treeObj.unbind("click",m.proxy).unbind("dblclick",m.proxy).unbind("mouseover",m.proxy).unbind("mouseout",m.proxy).unbind("mousedown",m.proxy).unbind("mouseup",m.proxy).unbind("contextmenu",m.proxy)},doProxy:function(b){for(var a=[],c=0,d=s.length;c<d;c++){var f=s[c].apply(this,arguments);a.push(f);if(f.stop)break}return a},proxy:function(b){var a=h.getSetting(b.data.treeId);if(!j.uCanDo(a,b))return!0;
for(var a=m.doProxy(b),c=!0,d=0,f=a.length;d<f;d++){var g=a[d];g.nodeEventCallback&&(c=g.nodeEventCallback.apply(g,[b,g.node])&&c);g.treeEventCallback&&(c=g.treeEventCallback.apply(g,[b,g.node])&&c)}return c}};G=function(b,a){var c=h.getSetting(b.data.treeId);if(a.open){if(j.apply(c.callback.beforeCollapse,[c.treeId,a],!0)==!1)return!0}else if(j.apply(c.callback.beforeExpand,[c.treeId,a],!0)==!1)return!0;h.getRoot(c).expandTriggerFlag=!0;i.switchNode(c,a);return!0};H=function(b,a){var c=h.getSetting(b.data.treeId),
d=c.view.autoCancelSelected&&b.ctrlKey&&h.isSelectedNode(c,a)?0:c.view.autoCancelSelected&&b.ctrlKey&&c.view.selectedMulti?2:1;if(j.apply(c.callback.beforeClick,[c.treeId,a,d],!0)==!1)return!0;d===0?i.cancelPreSelectedNode(c,a):i.selectNode(c,a,d===2);c.treeObj.trigger(e.event.CLICK,[b,c.treeId,a,d]);return!0};I=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeMouseDown,[c.treeId,a],!0)&&j.apply(c.callback.onMouseDown,[b,c.treeId,a]);return!0};J=function(b,a){var c=h.getSetting(b.data.treeId);
j.apply(c.callback.beforeMouseUp,[c.treeId,a],!0)&&j.apply(c.callback.onMouseUp,[b,c.treeId,a]);return!0};K=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeDblClick,[c.treeId,a],!0)&&j.apply(c.callback.onDblClick,[b,c.treeId,a]);return!0};L=function(b,a){var c=h.getSetting(b.data.treeId);j.apply(c.callback.beforeRightClick,[c.treeId,a],!0)&&j.apply(c.callback.onRightClick,[b,c.treeId,a]);return typeof c.callback.onRightClick!="function"};var j={apply:function(b,a,c){return typeof b==
"function"?b.apply(N,a?a:[]):c},canAsync:function(b,a){var c=b.data.key.children;return b.async.enable&&a&&a.isParent&&!(a.zAsync||a[c]&&a[c].length>0)},clone:function(b){if(b===null)return null;var a=j.isArray(b)?[]:{},c;for(c in b)a[c]=b[c]instanceof Date?new Date(b[c].getTime()):typeof b[c]==="object"?arguments.callee(b[c]):b[c];return a},eqs:function(b,a){return b.toLowerCase()===a.toLowerCase()},isArray:function(b){return Object.prototype.toString.apply(b)==="[object Array]"},$:function(b,a,
c){a&&typeof a!="string"&&(c=a,a="");return typeof b=="string"?p(b,c?c.treeObj.get(0).ownerDocument:null):p("#"+b.tId+a,c?c.treeObj:null)},getMDom:function(b,a,c){if(!a)return null;for(;a&&a.id!==b.treeId;){for(var d=0,f=c.length;a.tagName&&d<f;d++)if(j.eqs(a.tagName,c[d].tagName)&&a.getAttribute(c[d].attrName)!==null)return a;a=a.parentNode}return null},getNodeMainDom:function(b){return p(b).parent("li").get(0)||p(b).parentsUntil("li").parent().get(0)},isChildOrSelf:function(b,a){return p(b).closest("#"+
a).length>0},uCanDo:function(){return!0}},i={addNodes:function(b,a,c,d){if(!b.data.keep.leaf||!a||a.isParent)if(j.isArray(c)||(c=[c]),b.data.simpleData.enable&&(c=h.transformTozTreeFormat(b,c)),a){var f=k(a,e.id.SWITCH,b),g=k(a,e.id.ICON,b),l=k(a,e.id.UL,b);if(!a.open)i.replaceSwitchClass(a,f,e.folder.CLOSE),i.replaceIcoClass(a,g,e.folder.CLOSE),a.open=!1,l.css({display:"none"});h.addNodesData(b,a,c);i.createNodes(b,a.level+1,c,a);d||i.expandCollapseParentNode(b,a,!0)}else h.addNodesData(b,h.getRoot(b),
c),i.createNodes(b,0,c,null)},appendNodes:function(b,a,c,d,f,g){if(!c)return[];for(var e=[],j=b.data.key.children,k=0,m=c.length;k<m;k++){var o=c[k];if(f){var t=(d?d:h.getRoot(b))[j].length==c.length&&k==0;h.initNode(b,a,o,d,t,k==c.length-1,g);h.addNodeCache(b,o)}t=[];o[j]&&o[j].length>0&&(t=i.appendNodes(b,a+1,o[j],o,f,g&&o.open));g&&(i.makeDOMNodeMainBefore(e,b,o),i.makeDOMNodeLine(e,b,o),h.getBeforeA(b,o,e),i.makeDOMNodeNameBefore(e,b,o),h.getInnerBeforeA(b,o,e),i.makeDOMNodeIcon(e,b,o),h.getInnerAfterA(b,
o,e),i.makeDOMNodeNameAfter(e,b,o),h.getAfterA(b,o,e),o.isParent&&o.open&&i.makeUlHtml(b,o,e,t.join("")),i.makeDOMNodeMainAfter(e,b,o),h.addCreatedNode(b,o))}return e},appendParentULDom:function(b,a){var c=[],d=k(a,b);!d.get(0)&&a.parentTId&&(i.appendParentULDom(b,a.getParentNode()),d=k(a,b));var f=k(a,e.id.UL,b);f.get(0)&&f.remove();f=i.appendNodes(b,a.level+1,a[b.data.key.children],a,!1,!0);i.makeUlHtml(b,a,c,f.join(""));d.append(c.join(""))},asyncNode:function(b,a,c,d){var f,g;if(a&&!a.isParent)return j.apply(d),
!1;else if(a&&a.isAjaxing)return!1;else if(j.apply(b.callback.beforeAsync,[b.treeId,a],!0)==!1)return j.apply(d),!1;if(a)a.isAjaxing=!0,k(a,e.id.ICON,b).attr({style:"","class":e.className.BUTTON+" "+e.className.ICO_LOADING});var l={};for(f=0,g=b.async.autoParam.length;a&&f<g;f++){var q=b.async.autoParam[f].split("="),n=q;q.length>1&&(n=q[1],q=q[0]);l[n]=a[q]}if(j.isArray(b.async.otherParam))for(f=0,g=b.async.otherParam.length;f<g;f+=2)l[b.async.otherParam[f]]=b.async.otherParam[f+1];else for(var m in b.async.otherParam)l[m]=
b.async.otherParam[m];var o=h.getRoot(b)._ver;p.ajax({contentType:b.async.contentType,type:b.async.type,url:j.apply(b.async.url,[b.treeId,a],b.async.url),data:l,dataType:b.async.dataType,success:function(f){if(o==h.getRoot(b)._ver){var g=[];try{g=!f||f.length==0?[]:typeof f=="string"?eval("("+f+")"):f}catch(l){g=f}if(a)a.isAjaxing=null,a.zAsync=!0;i.setNodeLineIcos(b,a);g&&g!==""?(g=j.apply(b.async.dataFilter,[b.treeId,a,g],g),i.addNodes(b,a,g?j.clone(g):[],!!c)):i.addNodes(b,a,[],!!c);b.treeObj.trigger(e.event.ASYNC_SUCCESS,
[b.treeId,a,f]);j.apply(d)}},error:function(c,d,f){if(o==h.getRoot(b)._ver){if(a)a.isAjaxing=null;i.setNodeLineIcos(b,a);b.treeObj.trigger(e.event.ASYNC_ERROR,[b.treeId,a,c,d,f])}}});return!0},cancelPreSelectedNode:function(b,a){for(var c=h.getRoot(b).curSelectedList,d=c.length-1;d>=0;d--)if(!a||a===c[d])if(k(c[d],e.id.A,b).removeClass(e.node.CURSELECTED),a){h.removeSelectedNode(b,a);break}if(!a)h.getRoot(b).curSelectedList=[]},createNodeCallback:function(b){if(b.callback.onNodeCreated||b.view.addDiyDom)for(var a=
h.getRoot(b);a.createdNodes.length>0;){var c=a.createdNodes.shift();j.apply(b.view.addDiyDom,[b.treeId,c]);b.callback.onNodeCreated&&b.treeObj.trigger(e.event.NODECREATED,[b.treeId,c])}},createNodes:function(b,a,c,d){if(c&&c.length!=0){var f=h.getRoot(b),g=b.data.key.children,g=!d||d.open||!!k(d[g][0],b).get(0);f.createdNodes=[];a=i.appendNodes(b,a,c,d,!0,g);d?(d=k(d,e.id.UL,b),d.get(0)&&d.append(a.join(""))):b.treeObj.append(a.join(""));i.createNodeCallback(b)}},destroy:function(b){b&&(h.initCache(b),
h.initRoot(b),m.unbindTree(b),m.unbindEvent(b),b.treeObj.empty())},expandCollapseNode:function(b,a,c,d,f){var g=h.getRoot(b),l=b.data.key.children;if(a){if(g.expandTriggerFlag){var q=f,f=function(){q&&q();a.open?b.treeObj.trigger(e.event.EXPAND,[b.treeId,a]):b.treeObj.trigger(e.event.COLLAPSE,[b.treeId,a])};g.expandTriggerFlag=!1}if(!a.open&&a.isParent&&(!k(a,e.id.UL,b).get(0)||a[l]&&a[l].length>0&&!k(a[l][0],b).get(0)))i.appendParentULDom(b,a),i.createNodeCallback(b);if(a.open==c)j.apply(f,[]);else{var c=
k(a,e.id.UL,b),g=k(a,e.id.SWITCH,b),n=k(a,e.id.ICON,b);a.isParent?(a.open=!a.open,a.iconOpen&&a.iconClose&&n.attr("style",i.makeNodeIcoStyle(b,a)),a.open?(i.replaceSwitchClass(a,g,e.folder.OPEN),i.replaceIcoClass(a,n,e.folder.OPEN),d==!1||b.view.expandSpeed==""?(c.show(),j.apply(f,[])):a[l]&&a[l].length>0?c.slideDown(b.view.expandSpeed,f):(c.show(),j.apply(f,[]))):(i.replaceSwitchClass(a,g,e.folder.CLOSE),i.replaceIcoClass(a,n,e.folder.CLOSE),d==!1||b.view.expandSpeed==""||!(a[l]&&a[l].length>0)?
(c.hide(),j.apply(f,[])):c.slideUp(b.view.expandSpeed,f))):j.apply(f,[])}}else j.apply(f,[])},expandCollapseParentNode:function(b,a,c,d,f){a&&(a.parentTId?(i.expandCollapseNode(b,a,c,d),a.parentTId&&i.expandCollapseParentNode(b,a.getParentNode(),c,d,f)):i.expandCollapseNode(b,a,c,d,f))},expandCollapseSonNode:function(b,a,c,d,f){var g=h.getRoot(b),e=b.data.key.children,g=a?a[e]:g[e],e=a?!1:d,j=h.getRoot(b).expandTriggerFlag;h.getRoot(b).expandTriggerFlag=!1;if(g)for(var k=0,m=g.length;k<m;k++)g[k]&&
i.expandCollapseSonNode(b,g[k],c,e);h.getRoot(b).expandTriggerFlag=j;i.expandCollapseNode(b,a,c,d,f)},makeDOMNodeIcon:function(b,a,c){var d=h.getNodeName(a,c),d=a.view.nameIsHTML?d:d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");b.push("<span id='",c.tId,e.id.ICON,"' title='' treeNode",e.id.ICON," class='",i.makeNodeIcoClass(a,c),"' style='",i.makeNodeIcoStyle(a,c),"'></span><span id='",c.tId,e.id.SPAN,"'>",d,"</span>")},makeDOMNodeLine:function(b,a,c){b.push("<span id='",c.tId,
e.id.SWITCH,"' title='' class='",i.makeNodeLineClass(a,c),"' treeNode",e.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(b){b.push("</li>")},makeDOMNodeMainBefore:function(b,a,c){b.push("<li id='",c.tId,"' class='",e.className.LEVEL,c.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(b){b.push("</a>")},makeDOMNodeNameBefore:function(b,a,c){var d=h.getNodeTitle(a,c),f=i.makeNodeUrl(a,c),g=i.makeNodeFontCss(a,c),l=[],k;for(k in g)l.push(k,":",g[k],";");b.push("<a id='",
c.tId,e.id.A,"' class='",e.className.LEVEL,c.level,"' treeNode",e.id.A,' onclick="',c.click||"",'" ',f!=null&&f.length>0?"href='"+f+"'":""," target='",i.makeNodeTarget(c),"' style='",l.join(""),"'");j.apply(a.view.showTitle,[a.treeId,c],a.view.showTitle)&&d&&b.push("title='",d.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'");b.push(">")},makeNodeFontCss:function(b,a){var c=j.apply(b.view.fontCss,[b.treeId,a],b.view.fontCss);return c&&typeof c!="function"?c:{}},makeNodeIcoClass:function(b,
a){var c=["ico"];a.isAjaxing||(c[0]=(a.iconSkin?a.iconSkin+"_":"")+c[0],a.isParent?c.push(a.open?e.folder.OPEN:e.folder.CLOSE):c.push(e.folder.DOCU));return e.className.BUTTON+" "+c.join("_")},makeNodeIcoStyle:function(b,a){var c=[];if(!a.isAjaxing){var d=a.isParent&&a.iconOpen&&a.iconClose?a.open?a.iconOpen:a.iconClose:a.icon;d&&c.push("background:url(",d,") 0 0 no-repeat;");(b.view.showIcon==!1||!j.apply(b.view.showIcon,[b.treeId,a],!0))&&c.push("width:0px;height:0px;")}return c.join("")},makeNodeLineClass:function(b,
a){var c=[];b.view.showLine?a.level==0&&a.isFirstNode&&a.isLastNode?c.push(e.line.ROOT):a.level==0&&a.isFirstNode?c.push(e.line.ROOTS):a.isLastNode?c.push(e.line.BOTTOM):c.push(e.line.CENTER):c.push(e.line.NOLINE);a.isParent?c.push(a.open?e.folder.OPEN:e.folder.CLOSE):c.push(e.folder.DOCU);return i.makeNodeLineClassEx(a)+c.join("_")},makeNodeLineClassEx:function(b){return e.className.BUTTON+" "+e.className.LEVEL+b.level+" "+e.className.SWITCH+" "},makeNodeTarget:function(b){return b.target||"_blank"},
makeNodeUrl:function(b,a){var c=b.data.key.url;return a[c]?a[c]:null},makeUlHtml:function(b,a,c,d){c.push("<ul id='",a.tId,e.id.UL,"' class='",e.className.LEVEL,a.level," ",i.makeUlLineClass(b,a),"' style='display:",a.open?"block":"none","'>");c.push(d);c.push("</ul>")},makeUlLineClass:function(b,a){return b.view.showLine&&!a.isLastNode?e.line.LINE:""},removeChildNodes:function(b,a){if(a){var c=b.data.key.children,d=a[c];if(d){for(var f=0,g=d.length;f<g;f++)h.removeNodeCache(b,d[f]);h.removeSelectedNode(b);
delete a[c];b.data.keep.parent?k(a,e.id.UL,b).empty():(a.isParent=!1,a.open=!1,c=k(a,e.id.SWITCH,b),d=k(a,e.id.ICON,b),i.replaceSwitchClass(a,c,e.folder.DOCU),i.replaceIcoClass(a,d,e.folder.DOCU),k(a,e.id.UL,b).remove())}}},setFirstNode:function(b,a){var c=b.data.key.children;if(a[c].length>0)a[c][0].isFirstNode=!0},setLastNode:function(b,a){var c=b.data.key.children,d=a[c].length;if(d>0)a[c][d-1].isLastNode=!0},removeNode:function(b,a){var c=h.getRoot(b),d=b.data.key.children,f=a.parentTId?a.getParentNode():
c;a.isFirstNode=!1;a.isLastNode=!1;a.getPreNode=function(){return null};a.getNextNode=function(){return null};if(h.getNodeCache(b,a.tId)){k(a,b).remove();h.removeNodeCache(b,a);h.removeSelectedNode(b,a);for(var g=0,l=f[d].length;g<l;g++)if(f[d][g].tId==a.tId){f[d].splice(g,1);break}i.setFirstNode(b,f);i.setLastNode(b,f);var j,g=f[d].length;if(!b.data.keep.parent&&g==0)f.isParent=!1,f.open=!1,g=k(f,e.id.UL,b),l=k(f,e.id.SWITCH,b),j=k(f,e.id.ICON,b),i.replaceSwitchClass(f,l,e.folder.DOCU),i.replaceIcoClass(f,
j,e.folder.DOCU),g.css("display","none");else if(b.view.showLine&&g>0){var n=f[d][g-1],g=k(n,e.id.UL,b),l=k(n,e.id.SWITCH,b);j=k(n,e.id.ICON,b);f==c?f[d].length==1?i.replaceSwitchClass(n,l,e.line.ROOT):(c=k(f[d][0],e.id.SWITCH,b),i.replaceSwitchClass(f[d][0],c,e.line.ROOTS),i.replaceSwitchClass(n,l,e.line.BOTTOM)):i.replaceSwitchClass(n,l,e.line.BOTTOM);g.removeClass(e.line.LINE)}}},replaceIcoClass:function(b,a,c){if(a&&!b.isAjaxing&&(b=a.attr("class"),b!=void 0)){b=b.split("_");switch(c){case e.folder.OPEN:case e.folder.CLOSE:case e.folder.DOCU:b[b.length-
1]=c}a.attr("class",b.join("_"))}},replaceSwitchClass:function(b,a,c){if(a){var d=a.attr("class");if(d!=void 0){d=d.split("_");switch(c){case e.line.ROOT:case e.line.ROOTS:case e.line.CENTER:case e.line.BOTTOM:case e.line.NOLINE:d[0]=i.makeNodeLineClassEx(b)+c;break;case e.folder.OPEN:case e.folder.CLOSE:case e.folder.DOCU:d[1]=c}a.attr("class",d.join("_"));c!==e.folder.DOCU?a.removeAttr("disabled"):a.attr("disabled","disabled")}}},selectNode:function(b,a,c){c||i.cancelPreSelectedNode(b);k(a,e.id.A,
b).addClass(e.node.CURSELECTED);h.addSelectedNode(b,a)},setNodeFontCss:function(b,a){var c=k(a,e.id.A,b),d=i.makeNodeFontCss(b,a);d&&c.css(d)},setNodeLineIcos:function(b,a){if(a){var c=k(a,e.id.SWITCH,b),d=k(a,e.id.UL,b),f=k(a,e.id.ICON,b),g=i.makeUlLineClass(b,a);g.length==0?d.removeClass(e.line.LINE):d.addClass(g);c.attr("class",i.makeNodeLineClass(b,a));a.isParent?c.removeAttr("disabled"):c.attr("disabled","disabled");f.removeAttr("style");f.attr("style",i.makeNodeIcoStyle(b,a));f.attr("class",
i.makeNodeIcoClass(b,a))}},setNodeName:function(b,a){var c=h.getNodeTitle(b,a),d=k(a,e.id.SPAN,b);d.empty();b.view.nameIsHTML?d.html(h.getNodeName(b,a)):d.text(h.getNodeName(b,a));j.apply(b.view.showTitle,[b.treeId,a],b.view.showTitle)&&k(a,e.id.A,b).attr("title",!c?"":c)},setNodeTarget:function(b,a){k(a,e.id.A,b).attr("target",i.makeNodeTarget(a))},setNodeUrl:function(b,a){var c=k(a,e.id.A,b),d=i.makeNodeUrl(b,a);d==null||d.length==0?c.removeAttr("href"):c.attr("href",d)},switchNode:function(b,a){a.open||
!j.canAsync(b,a)?i.expandCollapseNode(b,a,!a.open):b.async.enable?i.asyncNode(b,a)||i.expandCollapseNode(b,a,!a.open):a&&i.expandCollapseNode(b,a,!a.open)}};p.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",
ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:j,view:i,event:m,data:h},getZTreeObj:function(b){return(b=h.getZTreeTools(b))?b:null},destroy:function(b){if(b&&b.length>0)i.destroy(h.getSetting(b));else for(var a in r)i.destroy(r[a])},init:function(b,a,c){var d=j.clone(M);p.extend(!0,d,a);d.treeId=b.attr("id");d.treeObj=b;d.treeObj.empty();r[d.treeId]=d;if(typeof document.body.style.maxHeight===
"undefined")d.view.expandSpeed="";h.initRoot(d);b=h.getRoot(d);a=d.data.key.children;c=c?j.clone(j.isArray(c)?c:[c]):[];b[a]=d.data.simpleData.enable?h.transformTozTreeFormat(d,c):c;h.initCache(d);m.unbindTree(d);m.bindTree(d);m.unbindEvent(d);m.bindEvent(d);c={setting:d,addNodes:function(a,b,c){function e(){i.addNodes(d,a,h,c==!0)}if(!b)return null;a||(a=null);if(a&&!a.isParent&&d.data.keep.leaf)return null;var h=j.clone(j.isArray(b)?b:[b]);j.canAsync(d,a)?i.asyncNode(d,a,c,e):e();return h},cancelSelectedNode:function(a){i.cancelPreSelectedNode(d,
a)},destroy:function(){i.destroy(d)},expandAll:function(a){a=!!a;i.expandCollapseSonNode(d,null,a,!0);return a},expandNode:function(a,b,c,e,n){if(!a||!a.isParent)return null;b!==!0&&b!==!1&&(b=!a.open);if((n=!!n)&&b&&j.apply(d.callback.beforeExpand,[d.treeId,a],!0)==!1)return null;else if(n&&!b&&j.apply(d.callback.beforeCollapse,[d.treeId,a],!0)==!1)return null;b&&a.parentTId&&i.expandCollapseParentNode(d,a.getParentNode(),b,!1);if(b===a.open&&!c)return null;h.getRoot(d).expandTriggerFlag=n;if(!j.canAsync(d,
a)&&c)i.expandCollapseSonNode(d,a,b,!0,function(){if(e!==!1)try{k(a,d).focus().blur()}catch(b){}});else if(a.open=!b,i.switchNode(this.setting,a),e!==!1)try{k(a,d).focus().blur()}catch(m){}return b},getNodes:function(){return h.getNodes(d)},getNodeByParam:function(a,b,c){return!a?null:h.getNodeByParam(d,c?c[d.data.key.children]:h.getNodes(d),a,b)},getNodeByTId:function(a){return h.getNodeCache(d,a)},getNodesByParam:function(a,b,c){return!a?null:h.getNodesByParam(d,c?c[d.data.key.children]:h.getNodes(d),
a,b)},getNodesByParamFuzzy:function(a,b,c){return!a?null:h.getNodesByParamFuzzy(d,c?c[d.data.key.children]:h.getNodes(d),a,b)},getNodesByFilter:function(a,b,c,e){b=!!b;return!a||typeof a!="function"?b?null:[]:h.getNodesByFilter(d,c?c[d.data.key.children]:h.getNodes(d),a,b,e)},getNodeIndex:function(a){if(!a)return null;for(var b=d.data.key.children,c=a.parentTId?a.getParentNode():h.getRoot(d),e=0,i=c[b].length;e<i;e++)if(c[b][e]==a)return e;return-1},getSelectedNodes:function(){for(var a=[],b=h.getRoot(d).curSelectedList,
c=0,e=b.length;c<e;c++)a.push(b[c]);return a},isSelectedNode:function(a){return h.isSelectedNode(d,a)},reAsyncChildNodes:function(a,b,c){if(this.setting.async.enable){var j=!a;j&&(a=h.getRoot(d));if(b=="refresh"){for(var b=this.setting.data.key.children,m=0,p=a[b]?a[b].length:0;m<p;m++)h.removeNodeCache(d,a[b][m]);h.removeSelectedNode(d);a[b]=[];j?this.setting.treeObj.empty():k(a,e.id.UL,d).empty()}i.asyncNode(this.setting,j?null:a,!!c)}},refresh:function(){this.setting.treeObj.empty();var a=h.getRoot(d),
b=a[d.data.key.children];h.initRoot(d);a[d.data.key.children]=b;h.initCache(d);i.createNodes(d,0,a[d.data.key.children])},removeChildNodes:function(a){if(!a)return null;var b=a[d.data.key.children];i.removeChildNodes(d,a);return b?b:null},removeNode:function(a,b){a&&(b=!!b,b&&j.apply(d.callback.beforeRemove,[d.treeId,a],!0)==!1||(i.removeNode(d,a),b&&this.setting.treeObj.trigger(e.event.REMOVE,[d.treeId,a])))},selectNode:function(a,b){if(a&&j.uCanDo(d)){b=d.view.selectedMulti&&b;if(a.parentTId)i.expandCollapseParentNode(d,
a.getParentNode(),!0,!1,function(){try{k(a,d).focus().blur()}catch(b){}});else try{k(a,d).focus().blur()}catch(c){}i.selectNode(d,a,b)}},transformTozTreeNodes:function(a){return h.transformTozTreeFormat(d,a)},transformToArray:function(a){return h.transformToArrayFormat(d,a)},updateNode:function(a){a&&k(a,d).get(0)&&j.uCanDo(d)&&(i.setNodeName(d,a),i.setNodeTarget(d,a),i.setNodeUrl(d,a),i.setNodeLineIcos(d,a),i.setNodeFontCss(d,a))}};b.treeTools=c;h.setZTreeTools(d,c);b[a]&&b[a].length>0?i.createNodes(d,
0,b[a]):d.async.enable&&d.async.url&&d.async.url!==""&&i.asyncNode(d);return c}};var N=p.fn.zTree,k=j.$,e=N.consts})(jQuery);

/*
 * JQuery zTree excheck v3.5.15
 * http://zTree.me/
 *
 * Copyright (c) 2010 Hunter.z
 *
 * Licensed same as jquery - MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Date: 2013-10-15
 */
(function(m){var p,q,r,o={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},v={check:{enable:!1,autoCheckTrigger:!1,chkStyle:o.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:o.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}};p=function(b,
a){if(a.chkDisabled===!0)return!1;var c=f.getSetting(b.data.treeId),d=c.data.key.checked;if(k.apply(c.callback.beforeCheck,[c.treeId,a],!0)==!1)return!0;a[d]=!a[d];e.checkNodeRelation(c,a);d=n(a,j.id.CHECK,c);e.setChkClass(c,d,a);e.repairParentChkClassWithSelf(c,a);c.treeObj.trigger(j.event.CHECK,[b,c.treeId,a]);return!0};q=function(b,a){if(a.chkDisabled===!0)return!1;var c=f.getSetting(b.data.treeId),d=n(a,j.id.CHECK,c);a.check_Focus=!0;e.setChkClass(c,d,a);return!0};r=function(b,a){if(a.chkDisabled===
!0)return!1;var c=f.getSetting(b.data.treeId),d=n(a,j.id.CHECK,c);a.check_Focus=!1;e.setChkClass(c,d,a);return!0};m.extend(!0,m.fn.zTree.consts,o);m.extend(!0,m.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(b,a){var c,d,h,i=b.data.key.children,l=b.data.key.checked;c=j.radio;if(b.check.chkStyle==c.STYLE){var g=f.getRadioCheckedList(b);if(a[l])if(b.check.radioType==c.TYPE_ALL){for(d=g.length-1;d>=0;d--)c=g[d],c[l]=!1,g.splice(d,1),e.setChkClass(b,n(c,j.id.CHECK,b),c),c.parentTId!=a.parentTId&&
e.repairParentChkClassWithSelf(b,c);g.push(a)}else{g=a.parentTId?a.getParentNode():f.getRoot(b);for(d=0,h=g[i].length;d<h;d++)c=g[i][d],c[l]&&c!=a&&(c[l]=!1,e.setChkClass(b,n(c,j.id.CHECK,b),c))}else if(b.check.radioType==c.TYPE_ALL)for(d=0,h=g.length;d<h;d++)if(a==g[d]){g.splice(d,1);break}}else a[l]&&(!a[i]||a[i].length==0||b.check.chkboxType.Y.indexOf("s")>-1)&&e.setSonNodeCheckBox(b,a,!0),!a[l]&&(!a[i]||a[i].length==0||b.check.chkboxType.N.indexOf("s")>-1)&&e.setSonNodeCheckBox(b,a,!1),a[l]&&
b.check.chkboxType.Y.indexOf("p")>-1&&e.setParentNodeCheckBox(b,a,!0),!a[l]&&b.check.chkboxType.N.indexOf("p")>-1&&e.setParentNodeCheckBox(b,a,!1)},makeChkClass:function(b,a){var c=b.data.key.checked,d=j.checkbox,h=j.radio,i="",i=a.chkDisabled===!0?d.DISABLED:a.halfCheck?d.PART:b.check.chkStyle==h.STYLE?a.check_Child_State<1?d.FULL:d.PART:a[c]?a.check_Child_State===2||a.check_Child_State===-1?d.FULL:d.PART:a.check_Child_State<1?d.FULL:d.PART,c=b.check.chkStyle+"_"+(a[c]?d.TRUE:d.FALSE)+"_"+i,c=a.check_Focus&&
a.chkDisabled!==!0?c+"_"+d.FOCUS:c;return j.className.BUTTON+" "+d.DEFAULT+" "+c},repairAllChk:function(b,a){if(b.check.enable&&b.check.chkStyle===j.checkbox.STYLE)for(var c=b.data.key.checked,d=b.data.key.children,h=f.getRoot(b),i=0,l=h[d].length;i<l;i++){var g=h[d][i];g.nocheck!==!0&&g.chkDisabled!==!0&&(g[c]=a);e.setSonNodeCheckBox(b,g,a)}},repairChkClass:function(b,a){if(a&&(f.makeChkFlag(b,a),a.nocheck!==!0)){var c=n(a,j.id.CHECK,b);e.setChkClass(b,c,a)}},repairParentChkClass:function(b,a){if(a&&
a.parentTId){var c=a.getParentNode();e.repairChkClass(b,c);e.repairParentChkClass(b,c)}},repairParentChkClassWithSelf:function(b,a){if(a){var c=b.data.key.children;a[c]&&a[c].length>0?e.repairParentChkClass(b,a[c][0]):e.repairParentChkClass(b,a)}},repairSonChkDisabled:function(b,a,c,d){if(a){var h=b.data.key.children;if(a.chkDisabled!=c)a.chkDisabled=c;e.repairChkClass(b,a);if(a[h]&&d)for(var i=0,l=a[h].length;i<l;i++)e.repairSonChkDisabled(b,a[h][i],c,d)}},repairParentChkDisabled:function(b,a,c,
d){if(a){if(a.chkDisabled!=c&&d)a.chkDisabled=c;e.repairChkClass(b,a);e.repairParentChkDisabled(b,a.getParentNode(),c,d)}},setChkClass:function(b,a,c){a&&(c.nocheck===!0?a.hide():a.show(),a.removeClass(),a.addClass(e.makeChkClass(b,c)))},setParentNodeCheckBox:function(b,a,c,d){var h=b.data.key.children,i=b.data.key.checked,l=n(a,j.id.CHECK,b);d||(d=a);f.makeChkFlag(b,a);a.nocheck!==!0&&a.chkDisabled!==!0&&(a[i]=c,e.setChkClass(b,l,a),b.check.autoCheckTrigger&&a!=d&&b.treeObj.trigger(j.event.CHECK,
[null,b.treeId,a]));if(a.parentTId){l=!0;if(!c)for(var h=a.getParentNode()[h],g=0,k=h.length;g<k;g++)if(h[g].nocheck!==!0&&h[g].chkDisabled!==!0&&h[g][i]||(h[g].nocheck===!0||h[g].chkDisabled===!0)&&h[g].check_Child_State>0){l=!1;break}l&&e.setParentNodeCheckBox(b,a.getParentNode(),c,d)}},setSonNodeCheckBox:function(b,a,c,d){if(a){var h=b.data.key.children,i=b.data.key.checked,l=n(a,j.id.CHECK,b);d||(d=a);var g=!1;if(a[h])for(var k=0,m=a[h].length;k<m&&a.chkDisabled!==!0;k++){var o=a[h][k];e.setSonNodeCheckBox(b,
o,c,d);o.chkDisabled===!0&&(g=!0)}if(a!=f.getRoot(b)&&a.chkDisabled!==!0){g&&a.nocheck!==!0&&f.makeChkFlag(b,a);if(a.nocheck!==!0&&a.chkDisabled!==!0){if(a[i]=c,!g)a.check_Child_State=a[h]&&a[h].length>0?c?2:0:-1}else a.check_Child_State=-1;e.setChkClass(b,l,a);b.check.autoCheckTrigger&&a!=d&&a.nocheck!==!0&&a.chkDisabled!==!0&&b.treeObj.trigger(j.event.CHECK,[null,b.treeId,a])}}}},event:{},data:{getRadioCheckedList:function(b){for(var a=f.getRoot(b).radioCheckedList,c=0,d=a.length;c<d;c++)f.getNodeCache(b,
a[c].tId)||(a.splice(c,1),c--,d--);return a},getCheckStatus:function(b,a){if(!b.check.enable||a.nocheck||a.chkDisabled)return null;var c=b.data.key.checked;return{checked:a[c],half:a.halfCheck?a.halfCheck:b.check.chkStyle==j.radio.STYLE?a.check_Child_State===2:a[c]?a.check_Child_State>-1&&a.check_Child_State<2:a.check_Child_State>0}},getTreeCheckedNodes:function(b,a,c,d){if(!a)return[];for(var h=b.data.key.children,i=b.data.key.checked,e=c&&b.check.chkStyle==j.radio.STYLE&&b.check.radioType==j.radio.TYPE_ALL,
d=!d?[]:d,g=0,k=a.length;g<k;g++){if(a[g].nocheck!==!0&&a[g].chkDisabled!==!0&&a[g][i]==c&&(d.push(a[g]),e))break;f.getTreeCheckedNodes(b,a[g][h],c,d);if(e&&d.length>0)break}return d},getTreeChangeCheckedNodes:function(b,a,c){if(!a)return[];for(var d=b.data.key.children,h=b.data.key.checked,c=!c?[]:c,i=0,e=a.length;i<e;i++)a[i].nocheck!==!0&&a[i].chkDisabled!==!0&&a[i][h]!=a[i].checkedOld&&c.push(a[i]),f.getTreeChangeCheckedNodes(b,a[i][d],c);return c},makeChkFlag:function(b,a){if(a){var c=b.data.key.children,
d=b.data.key.checked,h=-1;if(a[c])for(var i=0,e=a[c].length;i<e;i++){var g=a[c][i],f=-1;if(b.check.chkStyle==j.radio.STYLE)if(f=g.nocheck===!0||g.chkDisabled===!0?g.check_Child_State:g.halfCheck===!0?2:g[d]?2:g.check_Child_State>0?2:0,f==2){h=2;break}else f==0&&(h=0);else if(b.check.chkStyle==j.checkbox.STYLE)if(f=g.nocheck===!0||g.chkDisabled===!0?g.check_Child_State:g.halfCheck===!0?1:g[d]?g.check_Child_State===-1||g.check_Child_State===2?2:1:g.check_Child_State>0?1:0,f===1){h=1;break}else if(f===
2&&h>-1&&i>0&&f!==h){h=1;break}else if(h===2&&f>-1&&f<2){h=1;break}else f>-1&&(h=f)}a.check_Child_State=h}}}});var m=m.fn.zTree,k=m._z.tools,j=m.consts,e=m._z.view,f=m._z.data,n=k.$;f.exSetting(v);f.addInitBind(function(b){b.treeObj.bind(j.event.CHECK,function(a,c,d,h){k.apply(b.callback.onCheck,[c?c:a,d,h])})});f.addInitUnBind(function(b){b.treeObj.unbind(j.event.CHECK)});f.addInitCache(function(){});f.addInitNode(function(b,a,c,d){if(c){a=b.data.key.checked;typeof c[a]=="string"&&(c[a]=k.eqs(c[a],
"true"));c[a]=!!c[a];c.checkedOld=c[a];if(typeof c.nocheck=="string")c.nocheck=k.eqs(c.nocheck,"true");c.nocheck=!!c.nocheck||b.check.nocheckInherit&&d&&!!d.nocheck;if(typeof c.chkDisabled=="string")c.chkDisabled=k.eqs(c.chkDisabled,"true");c.chkDisabled=!!c.chkDisabled||b.check.chkDisabledInherit&&d&&!!d.chkDisabled;if(typeof c.halfCheck=="string")c.halfCheck=k.eqs(c.halfCheck,"true");c.halfCheck=!!c.halfCheck;c.check_Child_State=-1;c.check_Focus=!1;c.getCheckStatus=function(){return f.getCheckStatus(b,
c)};b.check.chkStyle==j.radio.STYLE&&b.check.radioType==j.radio.TYPE_ALL&&c[a]&&f.getRoot(b).radioCheckedList.push(c)}});f.addInitProxy(function(b){var a=b.target,c=f.getSetting(b.data.treeId),d="",h=null,e="",l=null;if(k.eqs(b.type,"mouseover")){if(c.check.enable&&k.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+j.id.CHECK)!==null)d=k.getNodeMainDom(a).id,e="mouseoverCheck"}else if(k.eqs(b.type,"mouseout")){if(c.check.enable&&k.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+j.id.CHECK)!==null)d=
k.getNodeMainDom(a).id,e="mouseoutCheck"}else if(k.eqs(b.type,"click")&&c.check.enable&&k.eqs(a.tagName,"span")&&a.getAttribute("treeNode"+j.id.CHECK)!==null)d=k.getNodeMainDom(a).id,e="checkNode";if(d.length>0)switch(h=f.getNodeCache(c,d),e){case "checkNode":l=p;break;case "mouseoverCheck":l=q;break;case "mouseoutCheck":l=r}return{stop:e==="checkNode",node:h,nodeEventType:e,nodeEventCallback:l,treeEventType:"",treeEventCallback:null}},!0);f.addInitRoot(function(b){f.getRoot(b).radioCheckedList=[]});
f.addBeforeA(function(b,a,c){b.check.enable&&(f.makeChkFlag(b,a),c.push("<span ID='",a.tId,j.id.CHECK,"' class='",e.makeChkClass(b,a),"' treeNode",j.id.CHECK,a.nocheck===!0?" style='display:none;'":"","></span>"))});f.addZTreeTools(function(b,a){a.checkNode=function(a,c,i,f){var g=b.data.key.checked;if(a.chkDisabled!==!0&&(c!==!0&&c!==!1&&(c=!a[g]),f=!!f,(a[g]!==c||i)&&!(f&&k.apply(this.setting.callback.beforeCheck,[b.treeId,a],!0)==!1)&&k.uCanDo(this.setting)&&b.check.enable&&a.nocheck!==!0))a[g]=
c,c=n(a,j.id.CHECK,b),(i||b.check.chkStyle===j.radio.STYLE)&&e.checkNodeRelation(b,a),e.setChkClass(b,c,a),e.repairParentChkClassWithSelf(b,a),f&&b.treeObj.trigger(j.event.CHECK,[null,b.treeId,a])};a.checkAllNodes=function(a){e.repairAllChk(b,!!a)};a.getCheckedNodes=function(a){var c=b.data.key.children;return f.getTreeCheckedNodes(b,f.getRoot(b)[c],a!==!1)};a.getChangeCheckedNodes=function(){var a=b.data.key.children;return f.getTreeChangeCheckedNodes(b,f.getRoot(b)[a])};a.setChkDisabled=function(a,
c,f,j){c=!!c;f=!!f;e.repairSonChkDisabled(b,a,c,!!j);e.repairParentChkDisabled(b,a.getParentNode(),c,f)};var c=a.updateNode;a.updateNode=function(d,f){c&&c.apply(a,arguments);if(d&&b.check.enable&&n(d,b).get(0)&&k.uCanDo(b)){var i=n(d,j.id.CHECK,b);(f==!0||b.check.chkStyle===j.radio.STYLE)&&e.checkNodeRelation(b,d);e.setChkClass(b,i,d);e.repairParentChkClassWithSelf(b,d)}}});var s=e.createNodes;e.createNodes=function(b,a,c,d){s&&s.apply(e,arguments);c&&e.repairParentChkClassWithSelf(b,d)};var t=e.removeNode;
e.removeNode=function(b,a){var c=a.getParentNode();t&&t.apply(e,arguments);a&&c&&(e.repairChkClass(b,c),e.repairParentChkClass(b,c))};var u=e.appendNodes;e.appendNodes=function(b,a,c,d,h,i){var j="";u&&(j=u.apply(e,arguments));d&&f.makeChkFlag(b,d);return j}})(jQuery);

//tab.js
window.AbstractTab={};AbstractTab.add=function(a){if(this.isExist(a.id)){this.click(a.id);return false}this.addTab(a);this.addFrame(a)};AbstractTab.addTab=function(g){var h=this;var b=g.id;var e=(g.lock?true:false);var k=g.lock?this.lockClass:"";var c=this.activeClass;var j=g.title?g.title:"";var a=this.getCutName(g.name);var i={id:b,name:a,active:c,title:j,lock:k,isLock:e};var f=this.getTabHtml(i);var d=jQuery(f);d.click(function(){h.click(this.id)}).click();d.find(".closeTab").click(function(){h.close(jQuery(this).parent().attr("id"));return false});d.appendTo(this.tabs)};AbstractTab.getTabHtml=function(b){var a="<li lock='"+b.isLock+"' id='"+b.id+"' class='"+b.active+"'  title='"+b.title+"'> \n";a+='<a href="#" class=\'li '+b.lock+"'> \n";a+='<span class="left"></span> \n';a+='<span class="text"><span>'+b.name+"</span></span> \n";a+='<span class="right"></span></a>\n';a+="<a href='javascript:void(0)' class='closeTab'></a>\n";a+="</li> \n";return a};AbstractTab.click=function(a){this.tabs.find("li").removeClass(this.activeClass);jQuery("#"+a).addClass(this.activeClass);this.loadFrame(a)};AbstractTab.isExist=function(a){return jQuery("#"+a).size()>0};AbstractTab.getCutName=function(a){var b=new String(a);if(b.length>7){return b.substring(0,7)+"..."}return b};AbstractTab.addFrame=function(d){var b=d.url;var f=this.getFrameID(d.id);var e=d.frame||{};var c=e.style||"width:100%;height:100%";var a=e.name||f;var e="<iframe id='"+f+"' name='"+a+"' frameborder='0' style='"+c+"' src='"+b+"'></iframe>";jQuery(e).appendTo(this.frames);this.loadFrame(d.id)};AbstractTab.loadFrame=function(a){var a=this.getFrameID(a);this.frames.find("iframe").hide();jQuery("#"+a).show()};AbstractTab.getFrameID=function(a){return"Frame"+a};AbstractTab.close=function(f){var b=this.activeClass;var d=jQuery("#"+f);var a=d.attr("lock");var c=d.hasClass(b);if(a!="true"){var e=jQuery("#"+this.getFrameID(f));if(c){if(d.next().is("li")){d.next().click()}else{if(d.prev().is("li")){d.prev().click()}}}d.remove();e.remove()}};AbstractTab.closeAll=function(){var b=this;this.tabs.find("li[lock!='true']").each(function(){jQuery(this).remove();var c=b.getFrameID(this.id);jQuery("#"+c).remove()});var a=this.activeClass;if(this.tabs.find("."+a).size()==0){this.tabs.find("li:last").click()}};AbstractTab.lock=function(e,c){var d=this.lockClass;jQuery("#"+e).attr("lock",new String(c));var b=jQuery("#"+e).find("a");if(c){b.addClass(d)}else{b.removeClass(d)}};AbstractTab.move=function(a){if(a.action=="left"){this.tabs.find("li:hidden:last").show()}else{if(a.action=="right"){this.tabs.find("li:visible:first").hide()}else{if(a.action=="reset"){this.tabs.find("li").show()}}}};AbstractTab.init=function(){var a=this;jQuery("#"+this.leftID).click(function(){a.move({action:"left"})});jQuery("#"+this.rightID).click(function(){a.move({action:"right"})});jQuery("#"+this.resetID).click(function(){a.move({action:"reset"})});jQuery("#"+this.closeID).click(function(){a.closeAll()});return this};window.FantasyTab=function(a){var b=a||{};this.tabID=b.tabID||"Tabs";this.frameID=b.frameID||"Frames";this.activeClass=b.activeClass||"on";this.lockClass=b.lockClass||"locked";this.leftID=b.leftID||"Left";this.rightID=b.rightID||"Right";this.resetID=b.resetID||"Reset";this.closeID=b.closeID||"Close";this.tabs=jQuery("#"+this.tabID);this.frames=jQuery("#"+this.frameID)};jQuery.extend(FantasyTab.prototype,AbstractTab);window.FantasyTab.create=function(b){var a=new FantasyTab(b);return a.init()};

//pagenav.cn.js
var pageNav=pageNav||{};pageNav.fn=null;pageNav.nav=function(g,b){if(b<=1){this.p=1;this.pn=1;return this.pHtml2(1)}if(b<g){g=b}var d="";if(g<=1){g=1}else{d+=this.pHtml(g-1,b,"上一页");d+=this.pHtml(1,b,"1")}this.p=g;this.pn=b;var h=2;var a=(b<9)?b:9;if(g>=7){d+="...";h=g-4;var f=g+4;a=(b<f)?b:f}for(var c=h;c<g;c++){d+=this.pHtml(c,b)}d+=this.pHtml2(g);for(var c=g+1;c<=a;c++){d+=this.pHtml(c,b)}if(a<b){d+="..."}if(g<b){d+=this.pHtml(g+1,b,"下一页")}return d};pageNav.pHtml=function(a,b,d){d=d||a;var c=" <a href='javascript:pageNav.go("+a+","+b+");' style='font-weight: bold;padding: 2px 2px;background-color:#e6eef0;'>"+d+"</a> ";return c};pageNav.pHtml2=function(a){var b=" <span class='cPageNum'>"+a+"</span> ";return b};pageNav.go=function(b,a){document.getElementById("pageNav").innerHTML=this.nav(b,a);if(this.fn!=null){this.fn(this.p,this.pn)}};

//mmgrid.js
!function(c){var b=function(f,d){this._id=(((1+Math.random())*65536)|0).toString(16);this._loadCount=0;this.opts=d;this._initLayout(c(f));this._initHead();this._initOptions();this._initEvents();this._setColsWidth();if(this.opts.fullWidthRows){this._fullWidthRows()}for(var e=0;e<this.opts.plugins.length;e++){var h=this.opts.plugins[e];h.init(c.extend(f,this))}if(d.autoLoad){var g=this;this.opts=d;setTimeout(function(){if(d.url){g.load()}else{g.load(d.items)}},0)}};var a=function(){var d=!!window.ActiveXObject;var h=d&&!!window.atob;var e=d&&document.addEventListener&&!window.atob;var f=d&&document.querySelector&&!document.addEventListener;var g=d&&window.XMLHttpRequest&&!document.querySelector;var i=d&&!window.XMLHttpRequest;return{isIE:d,isIE6:i,isIE7:g,isIE8:f,isIE9:e,isIE10:h}}();b.prototype={_initLayout:function(g){var h=this.opts;var f=g.parent();var e=g.index();var j=['<div class="mmGrid">',"<style></style>",'<div class="mmg-headWrapper">','<table class="mmg-head" cellspacing="0"></table>',"</div>",'<div class="mmg-colResizePointer"></div>','<div class="mmg-colResizePointer-before"></div>','<div class="mmg-backboard">','<a class="mmg-btnBackboardUp"></a>',"</div>",'<div class="mmg-bodyWrapper"></div>','<a class="mmg-btnBackboardDn"></a>','<div class="mmg-message">'+this.opts.noDataText+"</div>",'<div class="mmg-mask mmg-transparent"></div>','<div class="mmg-loading">','<div class="mmg-loadingImg"></div>','<div class="mmg-loadingText">'+this.opts.loadingText+"</div>","</div>","</div>"];if(a.isIE7||a.isIE6){g.prop("cellspacing",0)}var d=c(j.join(""));this.$mmGrid=d;this.$style=d.find("style");this.$headWrapper=d.find(".mmg-headWrapper");this.$head=d.find(".mmg-head");this.$backboard=d.find(".mmg-backboard");this.$bodyWrapper=d.find(".mmg-bodyWrapper");this.$body=g.removeAttr("style").addClass("mmg-body");this._insertEmptyRow();this.$body.appendTo(this.$bodyWrapper);if(e===0||f.children().length==0){f.prepend(this.$mmGrid)}else{f.children().eq(e-1).after(this.$mmGrid)}if(a.isIE6&&(!h.width||h.width==="auto")){d.width("100%");d.width(d.width()-(d.outerWidth(true)-d.width()))}else{d.width(h.width)}if(a.isIE6&&(!h.height||h.height==="auto")){d.height("100%");d.height(d.height()-(d.outerHeight(true)-d.height()))}else{d.height(h.height)}if(h.checkCol){var i=h.multiSelect?'<input type="checkbox" class="checkAll" >':'<input type="checkbox" disabled="disabled" class="checkAll">';h.cols.unshift({title:i,width:20,align:"center",lockWidth:true,checkCol:true,renderer:function(){return'<input type="checkbox" class="mmg-check">'}})}if(h.indexCol){h.cols.unshift({title:"#",width:h.indexColWidth,align:"center",lockWidth:true,indexCol:true,renderer:function(l,k,m){return'<label class="mmg-index">'+(m+1)+"</label>"}})}},_expandCols:function(g){var f=[];if(!g){return f}for(var e=0;e<g.length;e++){var d=g[e];if(d.cols){f.push(d);f.push.apply(f,this._expandCols(d.cols))}else{f.push(d)}}return f},_leafCols:function(){var g=this.opts;var f=[];var h=this._expandCols(g.cols);for(var e=0;e<h.length;e++){var d=h[e];if(!d.cols){f.push(d)}}return f},_expandThs:function(){return this.$head.find("th").sort(function(e,d){return parseInt(c(e).data("colindex"))-parseInt(c(d).data("colindex"))})},_leafThs:function(){return this.$head.find("th").filter(function(){return !c.data(this,"col").cols}).sort(function(e,d){return parseInt(c(e).data("colindex"))-parseInt(c(d).data("colindex"))})},_colsWithTitleDeep:function(h,d){var g=[];if(!h){return g}for(var f=0;f<h.length;f++){var e=h[f];if(d===1){g.push(e)}else{g.push.apply(g,this._colsWithTitleDeep(e.cols,d-1))}}return g},_titleDeep:function(g){var d=1;for(var f=0;f<g.length;f++){var e=g[f];if(e.cols){var h=1+this._titleDeep(e.cols);if(d<h){d=h}}}return d},_titleHtml:function(e,h){var f=this.opts;var g=[];if(!e.cols){g.push('<th class="');var d=c.inArray(e,this._expandCols(f.cols));g.push(this._genColClass(d));g.push(' " ');g.push(' rowspan="');g.push(h);g.push('" colspan="');g.push(1);g.push('" data-colIndex="');g.push(d);g.push('" >');g.push('<div class="mmg-titleWrapper" >');g.push('<span class="mmg-title ');if(e.sortable){g.push("mmg-canSort ")}g.push('">');if(e.titleHtml){g.push(e.titleHtml)}else{g.push(e.title)}g.push('</span><div class="mmg-sort"></div>');if(!e.lockWidth){g.push('<div class="mmg-colResize"></div>')}g.push("</div></th>")}else{g.push('<th class="');var d=c.inArray(e,this._expandCols(f.cols));g.push(this._genColClass(d));g.push(' mmg-groupCol" ');g.push(' rowspan="');g.push(h-1);g.push('" colspan="');g.push(e.cols.length);g.push('" data-colIndex="');g.push(d);g.push('" >');g.push('<div class="mmg-titleWrapper" >');g.push('<span class="mmg-title ');if(e.sortable){g.push("mmg-canSort ")}g.push('">');if(e.titleHtml){g.push(e.titleHtml)}else{g.push(e.title)}g.push('</span><div class="mmg-sort"></div>');g.push("</div></th>")}return g.join("")},_initHead:function(){var i=this;var d=this.opts;var j=this.$head;if(d.cols){var h=["<thead>"];var r=i._titleDeep(d.cols);for(var o=1;o<=r;o++){var l=i._colsWithTitleDeep(d.cols,o);h.push("<tr>");for(var n=0;n<l.length;n++){var g=l[n];h.push(this._titleHtml(g,r-o+1))}h.push("</tr>")}h.push("</thead>");j.html(h.join(""))}var k=this._expandThs();var f=this._expandCols(d.cols);c.each(k,function(s){if(!f[s].width){f[s].width=100}c.data(this,"col-width",f[s].width);c.data(this,"col",f[s])});var p=this.$mmGrid;var m=this.$headWrapper;var e=this.$bodyWrapper;e.height(p.height()-m.outerHeight(true));if(d.sortName){for(var n=0;n<f.length;n++){var g=f[n];if(g.sortName===d.sortName||g.name===d.sortName){var q=k.eq(n);c.data(q.find(".mmg-title")[0],"sortStatus",d.sortStatus);q.find(".mmg-sort").addClass("mmg-"+d.sortStatus)}}}},_initOptions:function(){var g=this.opts;var d=this.$mmGrid;var i=this.$headWrapper;var h=this.$backboard;d.find("a.mmg-btnBackboardDn").css({top:i.outerHeight(true)}).slideUp("fast");var j=this._leafCols();if(j){var k=["<h1>显示列</h1>"];for(var f=0;f<j.length;f++){k.push("<label ");if(j[f].checkCol||j[f].indexCol){k.push('style="display:none;" ')}var e=j[f];k.push('><input type="checkbox"  ');if(!e.hidden){k.push('checked="checked"')}if(e.lockDisplay){k.push(' disabled="disabled"')}k.push("/><span>");if(e.title){k.push(e.title)}else{k.push("未命名")}k.push("</span></label>")}h.append(c(k.join("")))}},_initEvents:function(){var i=this;var d=this.opts;var n=this.$mmGrid;var m=this.$headWrapper;var j=this.$head;var f=this.$bodyWrapper;var h=this.$body;var o=this.$backboard;var k=this._expandThs();var e=this._expandCols(d.cols);var g=this._leafCols();if(d.width==="auto"||d.height==="auto"||(typeof d.width==="string"&&d.width.indexOf("%")===d.width.length-1)||typeof d.height==="string"&&d.height.indexOf("%")===d.height.length-1){c(window).on("resize",function(){i.resize()})}f.on("scroll",function(){j.css("left",-c(this).scrollLeft())});var l=n.find("a.mmg-btnBackboardDn").on("click",function(){o.height(n.height()-m.outerHeight(true));o.slideDown();l.slideUp("fast");i._hideNoData()});h.on("mouseenter",function(){l.slideUp("fast")});n.on("mouseleave",function(){l.slideUp("fast")});m.on("mouseenter",function(){if(o.is(":hidden")&&d.showBackboard){l.slideDown("fast")}});n.find("a.mmg-btnBackboardUp").on("click",function(){o.slideUp().queue(function(p){if(!i.rowsLength()||(i.rowsLength()===1&&h.find("tr.emptyRow").length===1)){i._showNoData()}p()})});o.on("click",":checkbox",function(){var s=o.find("label").index(c(this).parent());var u=1;if(d.checkCol){u=u+1}if(d.indexCol){u=u+1}if(o.find("label :checked").length<u){this.checked=true;return}var q=g[s];if(this.checked){q.hidden=false}else{q.hidden=true}var t=j.find("th");for(var v=t.length-1;v>=0;v--){var x=t.eq(v);var w=x.data("col");if(w.cols){var r=true;var p=0;c.each(w.cols,function(y,z){if(!z.hidden){r=false;p++}});if(p!==0){x.prop("colspan",p)}w.hidden=r}}i._setColsWidth();o.height(n.height()-m.outerHeight(true));f.height(n.height()-m.outerHeight(true));n.find("a.mmg-btnBackboardDn").css({top:m.outerHeight(true)})});j.on("click",".mmg-title",function(){var s=c(this);var p=k.find(".mmg-title");var q=s.parent().parent().data("col");if(!q.sortable){return}var r=c.data(this,"sortStatus")==="asc"?"desc":"asc";c.each(p,function(){c.removeData(this,"sortStatus")});k.find(".mmg-sort").removeClass("mmg-asc").removeClass("mmg-desc");c.data(this,"sortStatus",r);s.siblings(".mmg-sort").addClass("mmg-"+r);if(d.url&&d.remoteSort){i.load()}else{i._nativeSorter(c.inArray(q,g),r);i._setStyle()}}).on("mousedown",".mmg-colResize",function(s){var q=c(this);var u=s.pageX;var p=n.find(".mmg-colResizePointer").css("left",s.pageX-m.offset().left).show();var t=j.position().left;var r=n.find(".mmg-colResizePointer-before").css("left",q.parent().parent().position().left+t).show();document.selection&&document.selection.empty&&(document.selection.empty(),1)||window.getSelection&&window.getSelection().removeAllRanges();document.body.onselectstart=function(){return false};m.css("-moz-user-select","none");n.on("mousemove",function(v){p.css("left",v.pageX-m.offset().left)}).on("mouseup",function(x){var w=q.parent().parent();var v=w.width()+x.pageX-u;c.data(w[0],"col-width",v);i._setColsWidth();m.mouseleave()}).on("mouseleave",function(){n.off("mouseup").off("mouseleave").off("mousemove");p.hide();r.hide();document.body.onselectstart=function(){return true};m.css("-moz-user-select","text")})});var h=this.$body;h.on("click","td",function(r){var q=c(this);var p=jQuery.Event("cellSelected");p.target=r.target;i.$body.triggerHandler(p,[c.data(q.parent()[0],"item"),q.parent().index(),q.index()]);if(p.isPropagationStopped()){return}if(!q.parent().hasClass("selected")){i.select(q.parent().index())}else{i.deselect(q.parent().index())}});h.on("click","tr > td .mmg-check",function(q){q.stopPropagation();var p=c(this);if(this.checked){i.select(c(p.parents("tr")[0]).index())}else{i.deselect(c(p.parents("tr")[0]).index())}});if(d.checkCol){j.find("th .checkAll").on("click",function(){if(this.checked){i.select("all")}else{i.deselect("all")}})}if(a.isIE6){h.on("mouseenter","tr",function(){c(this).toggleClass("hover")}).on("mouseleave","tr",function(){c(this).toggleClass("hover")})}},_rowHtml:function(l,j){var d=this.opts;var e=this._expandCols(d.cols);var g=this._leafCols();if(c.isPlainObject(l)){var h=[];h.push("<tr>");for(var k=0;k<g.length;k++){var f=g[k];h.push('<td class="');var i=c.inArray(f,e);h.push(this._genColClass(i));if(d.nowrap){h.push(" nowrap")}h.push('"><span style="+display:block; +width:100%" class="');if(d.nowrap){h.push("nowrap")}h.push('">');if(f.renderer){h.push(f.renderer(l[f.name],l,j))}else{h.push(l[f.name])}h.push("</span></td>")}h.push("</tr>");return h.join("")}},_populate:function(e){var g=this.opts;var i=this.$body;this._hideNoData();if(e&&e.length!==0&&g.cols){var h=[];h.push("<tbody>");for(var j=0;j<e.length;j++){var f=e[j];h.push(this._rowHtml(f,j))}h.push("</tbody>");i.empty().html(h.join(""));var d=i.find("tr");for(var j=0;j<e.length;j++){c.data(d.eq(j)[0],"item",e[j])}}else{this._insertEmptyRow();this._showNoData()}this._setStyle();if(g.fullWidthRows&&this._loadCount<=1){this._fullWidthRows()}this._hideLoading()},_insertEmptyRow:function(){var d=this.$body;d.empty().html('<tbody><tr class="emptyRow"><td  style="border: 0px;background: none;">&nbsp;</td></tr></tbody>')},_removeEmptyRow:function(){var d=this.$body;d.find("tr.emptyRow").remove()},_genColClass:function(d){return"mmg"+this._id+"-col"+d},_setStyle:function(){var d=this.$head;var e=this._expandThs();var f=this.$body;var h=this._leafCols();e.eq(0).addClass("first");e.eq(-1).addClass("last");f.find("tr,td").removeClass("even").removeClass("colSelected").removeClass("colSelectedEven");f.find("tr:odd").addClass("even");var g=c.inArray(d.find(".mmg-title").filter(function(){return c.data(this,"sortStatus")==="asc"||c(this).data("sortStatus")==="desc"}).parent().parent().data("col"),h);f.find("tr > td:nth-child("+(g+1)+")").addClass("colSelected").filter(":odd").addClass("colSelectedEven")},_setColsWidth:function(){var d=this.opts;var e=this.$style;var n=this.$head;var h=this.$bodyWrapper;var m=this.$body;var o=this._expandThs();var i=this._expandCols(d.cols);var j=h.scrollTop();var l=n.position().left;h.width(9999);m.width("auto");var f=[];for(var q=0;q<o.length;q++){var r=o.eq(q);f.push(".mmGrid ."+this._genColClass(q)+" {");var g=c.data(r[0],"col-width");f.push("width: "+g+"px;");f.push("max-width: "+g+"px;");var k=i[q];if(k.align){f.push("text-align: "+k.align+";")}if(k.hidden){f.push("display: none; ")}f.push(" }")}m.detach();try{e.text(f.join(""))}catch(p){e[0].styleSheet.cssText=f.join("")}m.width(n.width());h.width("100%");h.append(m);h.scrollLeft(-l);if(h.scrollLeft()===0){n.css("left",0)}h.scrollTop(j)},_fullWidthRows:function(){var e=this.opts;var h=this.$bodyWrapper;var t=this.$mmGrid;var p=this.$head;var o=h.width()-h[0].clientWidth;if(o&&a.isIE){o=o+1}var g=t.width()-p.width()-o;if(g<-20){return}var d=[];var q=this._leafThs();var s=this._leafCols();for(var n=0;n<s.length;n++){var j=s[n];var u=q.eq(n);if(!j.lockWidth&&u.is(":visible")){d.push(u)}}var k=Math.floor(g/d.length);var r=0;for(var n=0;n<d.length;n++){var u=d[n];var m=c.data(u[0],"col-width")+k;c.data(u[0],"col-width",m);var l=c.data(d[r][0],"col-width");if(l<m){r=n}}var f=g-k*d.length;var l=c.data(d[r][0],"col-width");c.data(d[r][0],"col-width",l+f);this._setColsWidth()},_showLoading:function(){var d=this.$mmGrid;d.find(".mmg-mask").show();var e=d.find(".mmg-loading");e.css({left:(d.width()-e.width())/2,top:(d.height()-e.height())/2}).show()},_hideLoading:function(){var d=this.$mmGrid;d.find(".mmg-mask").hide();d.find(".mmg-loading").hide()},_showNoData:function(){this._showMessage(this.opts.noDataText)},_hideNoData:function(){this._hideMessage()},_showMessage:function(g){var d=this.$mmGrid;var f=this.$headWrapper;var e=d.find(".mmg-message");e.css({left:(d.width()-e.width())/2,top:(d.height()+f.height()-e.height())/2}).text(g).show()},_hideMessage:function(){var d=this.$mmGrid;d.find(".mmg-message").hide()},_nativeSorter:function(e,f){var g=this._leafCols();var d=g[e];this.$body.find("tr > td:nth-child("+(e+1)+")").sortElements(function(j,i){var k=c.text(c(j));var h=c.text(c(i));if(d.type==="number"){k=parseFloat(k);h=parseFloat(h)}else{return f==="desc"?-k.localeCompare(h):k.localeCompare(h)}return k>h?(f==="desc"?-1:1):(f==="desc"?1:-1)},function(){return this.parentNode})},_refreshSortStatus:function(){var e=this.$head.find("th");var d=-1;var f="";e.find(".mmg-title").each(function(h,i){var g=c.data(i,"sortStatus");if(g){d=h;f=g}});var f=f==="desc"?"asc":"desc";if(d>=0){e.eq(d).find(".mmg-title").data("sortStatus",f).click()}},_loadAjax:function(n){var m=this;var d=this.opts;var h={};if(c.isFunction(d.params)){h=c.extend(h,d.params())}else{if(c.isPlainObject(d.params)){h=c.extend(h,d.params)}}if(d.remoteSort){var o="";var g="";var e=this.$head.find(".mmg-title");for(var p=0;p<e.length;p++){var j=c.data(e[p],"sortStatus");if(j){var f=e.eq(p).parent().parent().data("col");o=f.sortName?f.sortName:f.name;g=j}}if(o){h.sort=o+"."+g}}for(var k=0;k<this.opts.plugins.length;k++){var l=this.opts.plugins[k];c.extend(h,l.params())}h=c.extend(h,n);c.ajax({type:d.method,url:d.url,data:h,dataType:d.dataType,cache:d.cache}).done(function(q){var i=q;if(c.isArray(q[d.root])){i=q[d.root]}m._populate(i);if(!d.remoteSort){m._refreshSortStatus()}m.$body.triggerHandler("loadSuccess",q)}).fail(function(i){m.$body.triggerHandler("loadError",i)})},_loadNative:function(d){this._populate(d);this._refreshSortStatus();this.$body.triggerHandler("loadSuccess",d)},load:function(d){var e=this.opts;this._hideMessage();this._showLoading();this._loadCount=this._loadCount+1;if(c.isArray(d)){this._loadNative(d)}else{if(e.url){this._loadAjax(d)}else{if(e.items){this._loadNative(e.items)}else{this._loadNative([])}}}},resize:function(){var g=this.opts;var d=this.$mmGrid;var h=this.$headWrapper;var j=this.$bodyWrapper;if(a.isIE6&&(!g.width||g.width==="auto")){d.width("100%");d.width(d.width()-(d.outerWidth(true)-d.width()))}else{d.width(g.width)}if(a.isIE6&&(!g.height||g.height==="auto")){d.height("100%");d.height(d.height()-(d.outerHeight(true)-d.height()))}else{d.height(g.height)}j.height(d.height()-h.outerHeight(true));var f=d.find(".mmg-message");if(f.is(":visible")){f.css({left:(d.width()-f.width())/2,top:(d.height()+h.height()-f.height())/2})}var i=d.find(".mmg-mask");if(i.is(":visible")){i.width(d.width()).height(d.height());var e=d.find(".mmg-loading");e.css({left:(d.width()-e.width())/2,top:(d.height()-e.height())/2})}j.trigger("scroll")},select:function(e){var i=this.opts;var j=this.$body;var d=this.$head;if(typeof e==="number"){var h=j.find("tr").eq(e);if(!i.multiSelect){j.find("tr.selected").removeClass("selected");if(i.checkCol){j.find("tr > td").find(".mmg-check").prop("checked","")}}if(!h.hasClass("selected")){h.addClass("selected");if(i.checkCol){var f=h.find("td .mmg-check");if(f.prop("disabled")!=true){f.prop("checked","checked")}}}}else{if(typeof e==="function"){c.each(j.find("tr"),function(k){if(e(c.data(this,"item"),k)){var m=c(this);if(!m.hasClass("selected")){m.addClass("selected");if(i.checkCol){var l=m.find("td .mmg-check");if(l.prop("disabled")!=true){l.prop("checked","checked")}}}}})}else{if(e===undefined||(typeof e==="string"&&e==="all")){j.find("tr.selected").removeClass("selected");j.find("tr").addClass("selected");var f=j.find("tr > td").find(".mmg-check");if(f.prop("disabled")!=true){f.prop("checked","checked")}}else{return}}}if(i.checkCol){var g=j.find("tr > td").find(".mmg-check");if(g.length===g.filter(":checked").length){d.find("th .checkAll").prop("checked","checked")}}},deselect:function(e){var f=this.opts;var g=this.$body;var d=this.$head;if(typeof e==="number"){g.find("tr").eq(e).removeClass("selected");if(f.checkCol){g.find("tr").eq(e).find("td .mmg-check").prop("checked","")}}else{if(typeof e==="function"){c.each(g.find("tr"),function(h){if(e(c.data(this,"item"),h)){c(this).removeClass("selected");if(f.checkCol){c(this).find("td .mmg-check").prop("checked","")}}})}else{if(e===undefined||(typeof e==="string"&&e==="all")){g.find("tr.selected").removeClass("selected");if(f.checkCol){g.find("tr > td").find(".mmg-check").prop("checked","")}}else{return}}}d.find("th .checkAll").prop("checked","")},selectedRows:function(){var e=this.$body;var d=[];c.each(e.find("tr.selected"),function(f,g){d.push(c.data(this,"item"))});return d},selectedRowsIndex:function(){var f=this.$body;var d=this.$body.find("tr");var e=[];c.each(f.find("tr.selected"),function(g){e.push(d.index(this))});return e},rows:function(){var e=this.$body;var d=[];c.each(e.find("tr"),function(){d.push(c.data(this,"item"))});return d},row:function(d){var f=this.$body;if(d!==undefined&&d>=0){var e=f.find("tr").eq(d);if(e.length!==0){return c.data(e[0],"item")}}},rowsLength:function(){var e=this.$body;var d=e.find("tr").length;if(d===1&&e.find("tr.emptyRow").length===1){return 0}return d},addRow:function(h,e){var d=this.$body.find("tbody");if(c.isArray(h)){for(var f=h.length-1;f>=0;f--){this.addRow(h[f],e)}return}if(!c.isPlainObject(h)){return}this._hideNoData();this._removeEmptyRow();var g;if(e===undefined||e<0){g=c(this._rowHtml(h,this.rowsLength()));d.append(g)}else{g=c(this._rowHtml(h,e));if(e===0){d.prepend(g)}else{var j=d.find("tr").eq(e-1);if(j.length===0){d.append(g)}else{j.after(c(g))}}}g.data("item",h);this._setStyle();this.$body.triggerHandler("rowInserted",[h,e])},updateRow:function(i,e){var h=this.opts;var d=this.$body.find("tbody");if(!c.isPlainObject(i)){return}var j=this.row(e);var g=d.find("tr").eq(e);var f=g.find("td:first :checkbox").is(":checked");g.html(this._rowHtml(i,e).slice(4,-5));if(h.checkCol){g.find("td:first :checkbox").prop("checked",f)}g.data("item",i);this._setStyle();this.$body.triggerHandler("rowUpdated",[j,i,e])},removeRow:function(f){var j=this;var d=j.$body.find("tbody");if(c.isArray(f)){for(var g=f.length-1;g>=0;g--){j.removeRow(f[g])}return}if(f===undefined){var e=d.find("tr");for(var g=e.length-1;g>=0;g--){j.removeRow(g)}}else{var h=j.row(f);d.find("tr").eq(f).remove();this.$body.triggerHandler("rowRemoved",[h,f])}this._setStyle();if(this.rowsLength()===0){this._showNoData();this._insertEmptyRow()}}};c.fn.mmGrid=function(){if(arguments.length===0||typeof arguments[0]==="object"){var g=arguments[0],h=this.data("mmGrid"),e=c.extend(true,{},c.fn.mmGrid.defaults,g);if(!h){h=new b(this,e);this.data("mmGrid",h)}return c.extend(true,this,h)}if(typeof arguments[0]==="string"){var h=this.data("mmGrid");var f=h[arguments[0]];if(f){var d=Array.prototype.slice.call(arguments);return f.apply(h,d.slice(1))}}};c.fn.mmGrid.defaults={width:"auto",height:"280px",cols:[],url:false,params:{},method:"POST",dataType:"json",cache:false,root:"items",items:[],autoLoad:true,remoteSort:false,sortName:"",sortStatus:"asc",loadingText:"正在载入...",noDataText:"没有数据",multiSelect:false,checkCol:false,indexCol:false,indexColWidth:30,fullWidthRows:false,nowrap:false,showBackboard:true,plugins:[]};c.fn.mmGrid.Constructor=b;c.fn.sortElements=(function(){var d=[].sort;return function(f,g){g=g||function(){return this};var e=this.map(function(){var i=g.call(this),h=i.parentNode,j=h.insertBefore(document.createTextNode(""),i.nextSibling);return function(){if(h===this){throw new Error("You can't sort elements if any one is a descendant of another.")}h.insertBefore(this,j);h.removeChild(j)}});return d.call(this,f).each(function(h){e[h].call(g.call(this))})}})()}(window.jQuery);
//mmPaginator.js
!function(a){var b=function(d,c){this.$el=a(d);this.opts=c};b.prototype={_initLayout:function(){var e=this;var c=this.$el;var d=this.opts;c.addClass("mmPaginator");var g=['<div class="totalCountLabel"></div>','<ul class="pageList"></ul>','<div class="limit"><select></select></div>'];c.append(a(g.join("")));this.$totalCountLabel=c.find(".totalCountLabel");this.$pageList=c.find(".pageList");this.$limitList=c.find(".limit select");var f=this.$limitList;a.each(d.limitList,function(){var h=a("<option></option>").prop("value",this).text(e.formatString(d.limitLabel,[this]));f.append(h)});f.on("change",function(){e.$mmGrid.load()})},_plain:function(k,m,e){var h=this;var o=this.$el;var n=this.$pageList;var g=m%e===0?parseInt(m/e):parseInt(m/e)+1;g=g?g:0;if(g===0){k=1}else{if(k>g){k=g}else{if(k<1&&g!=0){k=1}}}var c=a('<li class="prev"><a>«</a></li>');if(k<=1){c.addClass("disable")}else{c.find("a").on("click",function(){o.data("page",k-1);h.$mmGrid.load()})}n.append(c);var j=[1];if(k>4){j.push("...")}for(var f=0;f<5;f++){var l=k-2+f;if(l>1&&l<=g-1){j.push(l)}}if(k+1<g-1){j.push("...")}if(g>1){j.push(g)}a.each(j,function(i,p){var q=a("<li><a></a></li>");if(p==="..."){q.addClass("").html("...")}else{if(p===k){q.addClass("active").find("a").text(p)}else{q.find("a").text(p).prop("title","第"+p+"页").on("click",function(r){o.data("page",p);h.$mmGrid.load()})}}n.append(q)});var d=a('<li class="next"><a title="下一页">»</a></li>');if(k>=g){d.addClass("disable")}else{d.find("a").on("click",function(){o.data("page",k+1);h.$mmGrid.load()})}n.append(d)},_search:function(e,d,c){},load:function(i){var e=this.$el;var h=this.$limitList;var f=this.opts;var g=i[f.pageParamName];if(g===undefined){g=e.data("page")}e.data("page",g);var d=i[f.totalCountName];if(d===undefined){d=0}e.data("totalCount",d);var c=i[f.limitParamName];if(c===undefined){c=h.val()}this.$limitList.val(c);this.$totalCountLabel.html(this.formatString(f.totalCountLabel,[d]));this.$pageList.empty();this._plain(g,d,this.$limitList.val())},formatString:function(d,c){return d.replace(/{(\d+)}/g,function(e,f){return typeof c[f]!="undefined"?c[f]:e})},params:function(){var d=this.opts;var c=this.$el;var e=this.$limitList;var f={};f[d.pageParamName]=c.data("page");f[d.limitParamName]=e.val();return f},init:function(c){var f=this;var e=f.opts;this.$mmGrid=c;this._initLayout();this.$mmGrid.on("loadSuccess",function(i,h){f.load(h)});var g={};g[e.totalCountName]=0;g[e.pageParamName]=e.page;g[e.limitParamName]=e.limit;this.load(g);if(c.opts.indexCol){var d=c.opts.cols[0];d.renderer=function(j,h,k){var i=f.params();return'<label class="mmg-index">'+(k+1+((i[e.pageParamName]-1)*i[e.limitParamName]))+"</label>"}}}};a.fn.mmPaginator=function(){if(arguments.length===0||typeof arguments[0]==="object"){var f=arguments[0],g=this.data("mmPaginator"),d=a.extend(true,{},a.fn.mmPaginator.defaults,f);if(!g){g=new b(this[0],d);this.data("mmPaginator",g)}return a.extend(true,this,g)}if(typeof arguments[0]==="string"){var g=this.data("mmPaginator");var e=g[arguments[0]];if(e){var c=Array.prototype.slice.call(arguments);return e.apply(g,c.slice(1))}}};a.fn.mmPaginator.defaults={style:"plain",totalCountName:"totalCount",page:1,pageParamName:"page",limitParamName:"limit",limitLabel:"每页{0}条",totalCountLabel:"共<span>{0}</span>条记录",limit:null,limitList:[20,30,40,50]};a.fn.mmPaginator.Constructor=b}(window.jQuery);

//plugin.js
(function(){var e;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());

//dwz_new_min.js
var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},ui:{sbar:true},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:false},msg:function(c,b){var a=function(g,e){e=e||[];var d=g;for(var f=0;f<e.length;f++){d=d.replace(new RegExp("\\{"+f+"\\}","g"),e[f])}return d};return a(this._msg[c],b)},debug:function(a){if(this._set.debug){alert(a)}},loadLogin:function(){if($.pdialog&&DWZ._set.loginTitle){$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:true,width:520,height:260})}else{window.location=DWZ._set.loginUrl}},jsonEval:function(data){try{if($.type(data)=="string"){return eval("("+data+")")}else{return data}}catch(e){return{}}},ajaxError:function(c,a,b){if(alertMsg){alertMsg.error("<div>Http status: "+c.status+" "+c.statusText+"</div><div>ajaxOptions: "+a+"</div><div>thrownError: "+b+"</div><div>"+c.responseText+"</div>")}else{alert("Http status: "+c.status+" "+c.statusText+"\najaxOptions: "+a+"\nthrownError:"+b+"\n"+c.responseText)}},ajaxDone:function(a){if(a.statusCode===undefined&&a.message===undefined){if(alertMsg){return alertMsg.error(a)}else{return alert(a)}}if(a.statusCode==DWZ.statusCode.error){if(a.message&&alertMsg){alertMsg.error(a.message)}}else{if(a.statusCode==DWZ.statusCode.timeout){if(alertMsg){alertMsg.error(a.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin})}else{DWZ.loadLogin()}}else{if(a.message&&alertMsg){alertMsg.correct(a.message)}}}},init:function(b,a){var c=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:false,statusCode:{}},a);this._set.loginUrl=c.loginUrl;this._set.loginTitle=c.loginTitle;this._set.debug=c.debug;$.extend(DWZ.statusCode,c.statusCode);$.extend(DWZ.pageInfo,c.pageInfo);jQuery.ajax({type:"GET",url:b,dataType:($.browser.msie)?"text":"xml",timeout:50000,cache:true,error:function(d){alert("Error loading XML document: "+b+"\nHttp status: "+d.status+" "+d.statusText)},success:function(d){if(typeof d=="string"){xml=new ActiveXObject("Microsoft.XMLDOM");xml.async=false;xml.loadXML(d)}else{xml=d}$(xml).find("_PAGE_").each(function(){var e=$(this).attr("id");if(e){DWZ.frag[e]=$(this).text()}});$(xml).find("_MSG_").each(function(){var e=$(this).attr("id");if(e){DWZ._msg[e]=$(this).text()}});if(jQuery.isFunction(c.callback)){c.callback()}}})}};(function(a){a.setRegional=function(b,c){if(!a.regional){a.regional={}}a.regional[b]=c};a.fn.extend({ajaxUrl:function(c){var b=a(this);if(a.fn.xheditor){a("textarea.editor",b).xheditor(false)}a.ajax({type:c.type||"GET",url:c.url,data:c.data,cache:false,success:function(d){var e=DWZ.jsonEval(d);DWZ.debug("statusCode:"+e.statusCode);if(e.statusCode==DWZ.statusCode.timeout){alertMsg.error(e.message||DWZ.msg("sessionTimout"),{okCall:function(){if(a.pdialog){a.pdialog.checkTimeout()}if(navTab){navTab.checkTimeout()}DWZ.loadLogin()}})}if(e.statusCode==DWZ.statusCode.error){if(e.message){alertMsg.error(e.message)}}else{b.html(d).initUI();if(a.isFunction(c.callback)){c.callback(d)}}},error:DWZ.ajaxError})},loadUrl:function(b,c,d){a(this).ajaxUrl({url:b,data:c,callback:d})},initUI:function(){return this.each(function(){if(a.isFunction(initUI)){initUI(this)}})},layoutH:function(b){return this.each(function(){var e=a(this);if(!b){b=e.parents("div.layoutBox:first")}var c=b.height();var f=parseInt(e.attr("layoutH"));var d=c-f>50?c-f:50;if(e.isTag("table")){e.removeAttr("layoutH").wrap('<div layoutH="'+f+'" style="overflow:auto;height:'+d+'px"></div>')}else{e.height(d).css("overflow","auto")}})},hoverClass:function(b){var c=b||"hover";return this.each(function(){a(this).hover(function(){a(this).addClass(c)},function(){a(this).removeClass(c)})})},focusClass:function(b){var c=b||"textInputFocus";return this.each(function(){a(this).focus(function(){a(this).addClass(c)}).blur(function(){a(this).removeClass(c)})})},inputAlert:function(){return this.each(function(){var d=a(this);function c(){return d.parent().find("label.alt")}function e(g){var f=d.position();return{width:d.width(),top:f.top+"px",left:f.left+"px",opacity:g||1}}if(c().size()<1){if(!d.attr("id")){d.attr("id",d.attr("name")+"_"+Math.round(Math.random()*10000))}var b=a('<label class="alt" for="'+d.attr("id")+'">'+d.attr("alt")+"</label>").appendTo(d.parent());b.css(e(1));if(d.val()){b.hide()}}d.focus(function(){c().css(e(0.3))}).blur(function(){if(!a(this).val()){c().show().css("opacity",1)}}).keydown(function(){c().hide()})})},isTag:function(b){if(!b){return false}return a(this)[0].tagName.toLowerCase()==b?true:false},isbind:function(b){var c=a(this).data("events");return c&&c.refChange}});a.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(c,b){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(b){return this.indexOf(b)===0},endsWith:function(b){var c=this.length-b.length;return c>=0&&this.lastIndexOf(b)===c},replaceSuffix:function(b){return this.replace(/\[[0-9]+\]/,"["+b+"]").replace("#index#",b)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},replaceAll:function(c,b){return this.replace(new RegExp(c,"gm"),b)},replaceTm:function(b){if(!b){return this}return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(c){return b[c.replace(/[{}]+/g,"")]})},replaceTmById:function(b){var c=b||a(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(d){var e=c.find("#"+d.replace(/[{}]+/g,""));return e.val()?e.val():d})},isFinishedTm:function(){return !(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this))},skipChar:function(b){if(!this||this.length===0){return""}if(this.charAt(0)===b){return this.substring(1).skipChar(b)}return this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var b=0;b<this.length;b+=1){var c=this.charAt(b);if(c!=" "&&c!="\n"&&c!="\t"&&c!="\r"){return false}}return true},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1}})})(jQuery);function Map(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(b,a){this.remove(b);this.elements.push({key:b,value:a})};this.remove=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){this.elements.splice(i,1);return true}}}catch(b){return false}return false};this.get=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return this.elements[i].value}}}catch(b){return null}};this.element=function(a){if(a<0||a>=this.elements.length){return null}return this.elements[a]};this.containsKey=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return true}}}catch(b){return false}return false};this.values=function(){var a=new Array();for(i=0;i<this.elements.length;i++){a.push(this.elements[i].value)}return a};this.keys=function(){var a=new Array();for(i=0;i<this.elements.length;i++){a.push(this.elements[i].key)}return a}}(function(a){a.fn.cssv=function(b){var c=a(this).css(b);return c.substring(0,c.indexOf("px"))*1};a.fn.jBar=function(b){var c=a.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},b);return this.each(function(){var f=this;var d=a(c.sideBar2,f);var e=a(c.sideBar,f);a(c.toggleBut,e).click(function(){DWZ.ui.sbar=false;a(c.splitBar).hide();var k=d.cssv("left")+d.outerWidth();var g=k-e.outerWidth();var j=a(c.container).cssv("left")-(e.outerWidth()-d.outerWidth());var h=e.outerWidth()-d.outerWidth()+a(c.container).outerWidth();a(c.container).animate({left:j,width:h},50,function(){e.animate({left:g},500,function(){e.hide();d.show().css("left",-50).animate({left:5},200);a(window).trigger("resizeGrid")})});a(c.collapse,d).click(function(){var m=d.cssv("left")+d.outerWidth();if(e.is(":hidden")){a(c.toggleBut,e).hide();e.show().animate({left:m},500);a(c.container).click(l)}else{e.animate({left:g},500,function(){e.hide()})}function l(){a(c.container).unbind("click",l);if(!DWZ.ui.sbar){e.animate({left:g},500,function(){e.hide()})}}return false});return false});a(c.toggleBut,d).click(function(){DWZ.ui.sbar=true;d.animate({left:-25},200,function(){e.show()});e.animate({left:5},800,function(){a(c.splitBar).show();a(c.toggleBut,e).show();var h=5+e.outerWidth()+a(c.splitBar).outerWidth();var g=a(c.container).outerWidth()-(h-a(c.container).cssv("left"));a(c.container).css({left:h,width:g});a(c.collapse,d).unbind("click");a(window).trigger("resizeGrid")});return false});a(c.splitBar).mousedown(function(g){a(c.splitBar2).each(function(){var h=a(this);setTimeout(function(){h.show()},100);h.css({visibility:"visible",left:a(c.splitBar).css("left")});h.jDrag(a.extend(b,{obj:a("#sidebar"),move:"horizontal",event:g,stop:function(){a(this).css("visibility","hidden");var j=a(this).cssv("left")-a(c.splitBar).cssv("left");var m=e.outerWidth()+j;var l=a(c.container).cssv("left")+j;var k=a(c.container).outerWidth()-j;e.css("width",m);a(c.splitBar).css("left",a(this).css("left"));a(c.container).css({left:l,width:k})}}));return false})})})}})(jQuery);(function(a){a.fn.jDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){a(this).unbind("mousedown",a.rwdrag.start);a.data(this,"pp-rwdrag",null)})}}return this.each(function(){var d=a(this);a.data(a.rwdrag,"pp-rwdrag",{options:a.extend({el:d,obj:d},b)});if(b.event){a.rwdrag.start(b.event)}else{var c=b.selector;a(c,obj).bind("mousedown",a.rwdrag.start)}})};a.rwdrag={start:function(d){var c=a.data(this,"pp-rwdrag");var b=c.options.el[0];a.data(b,"pp-rwdrag",{options:c.options});if(!a.rwdrag.current){a.rwdrag.current={el:b,oleft:parseInt(b.style.left)||0,otop:parseInt(b.style.top)||0,ox:d.pageX||d.screenX,oy:d.pageY||d.screenY};document.body.setCapture();a(document).bind("mouseup",a.rwdrag.stop);a(document).bind("mousemove",a.rwdrag.drag)}},drag:function(h){if(!h){var h=window.event}var g=a.rwdrag.current;var c=a.data(g.el,"pp-rwdrag");var f=(g.oleft+(h.pageX||h.clientX)-g.ox);var d=(g.otop+(h.pageY||h.clientY)-g.oy);if(d<1){d=0}if(c.options.move=="horizontal"){if((c.options.minW&&f>=a(c.options.obj).cssv("left")+c.options.minW)&&(c.options.maxW&&f<=a(c.options.obj).cssv("left")+c.options.maxW)){g.el.style.left=f+"px"}else{if(c.options.scop){if(c.options.relObj){if((f-parseInt(c.options.relObj.style.left))>c.options.cellMinW){g.el.style.left=f+"px"}}else{g.el.style.left=f+"px"}}}}else{if(c.options.move=="vertical"){g.el.style.top=d+"px"}else{var b=a(c.options.selector,a(c.options.obj));if(f>=-b.outerWidth()*2/3&&d>=0&&(f+b.outerWidth()/3<a(window).width())&&(d+b.outerHeight()<a(window).height())){g.el.style.left=f+"px";g.el.style.top=d+"px"}}}return a.rwdrag.preventEvent(h)},stop:function(d){var c=a.rwdrag.current;var b=a.data(c.el,"pp-rwdrag");a(document).unbind("mousemove",a.rwdrag.drag);a(document).unbind("mouseup",a.rwdrag.stop);if(b.options.stop){b.options.stop.apply(c.el,[c.el])}a.rwdrag.current=null;document.body.releaseCapture();return a.rwdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return true}}})(jQuery);(function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this);var cnum=$this.children().length;$(">li",$this).each(function(){var $li=$(this);var first=$li.prev()[0]?false:true;var last=$li.next()[0]?false:true;$li.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:(cnum>1?(first?op.firstExp:(last?op.lastExp:op.exp)):op.endExp),coll:(cnum>1?(first?op.firstColl:(last?op.lastColl:op.coll)):op.endColl),showSub:(!$this.hasClass("collapse")&&($this.hasClass("expand")||(cnum>1?(first?true:false):true))),isLast:(cnum>1?(last?true:false):true)})});setTimeout(function(){if($this.hasClass("treeCheck")){var checkFn=eval($this.attr("oncheck"));if(checkFn&&$.isFunction(checkFn)){$("div.ckbox",$this).each(function(){var ckbox=$(this);ckbox.click(function(){var checked=$(ckbox).hasClass("checked");var items=[];if(checked){var tnode=$(ckbox).parent().parent();var boxes=$("input",tnode);if(boxes.size()>1){$(boxes).each(function(){items[items.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}})}else{items={name:boxes.attr("name"),value:boxes.val(),text:boxes.attr("text")}}}checkFn({checked:checked,items:items})})})}}$("a",$this).click(function(event){$("div."+op.selected,$this).removeClass(op.selected);var parent=$(this).parent().addClass(op.selected);$(".ckbox",parent).trigger("click");event.stopPropagation();$(document).trigger("click");if(!$(this).attr("target")){return false}})},1)})},subTree:function(op,level){return this.each(function(){$(">li",this).each(function(){var $this=$(this);setTimeout(function(){var isLast=($this.next()[0]?false:true);$this.genTree({icon:op.icon,ckbox:op.ckbox,exp:isLast?op.options.lastExp:op.options.exp,coll:isLast?op.options.lastColl:op.options.coll,options:op.options,level:level,space:isLast?null:op.space,showSub:op.showSub,isLast:isLast})},1)})})},genTree:function(options){var op=$.extend({icon:options.icon,ckbox:options.ckbox,exp:"",coll:"",showSub:false,level:0,options:null,isLast:false},options);return this.each(function(){var node=$(this);var tree=$(">ul",node);var parent=node.parent().prev();var checked="unchecked";if(op.ckbox){if($(">.checked",parent).size()>0){checked="checked"}}if(tree.size()>0){node.children(":first").wrap("<div></div>");$(">div",node).prepend("<div class='"+(op.showSub?op.coll:op.exp)+"'></div>"+(op.ckbox?"<div class='ckbox "+checked+"'></div>":"")+(op.icon?"<div class='"+(op.showSub?op.options.folderColl:op.options.folderExp)+"'></div>":""));op.showSub?tree.show():tree.hide();$(">div>div:first,>div>a",node).click(function(){var $fnode=$(">li:first",tree);if($fnode.children(":first").isTag("a")){tree.subTree(op,op.level+1)}var $this=$(this);var isA=$this.isTag("a");var $this=isA?$(">div>div",node).eq(op.level):$this;if(!isA||tree.is(":hidden")){$this.toggleClass(op.exp).toggleClass(op.coll);if(op.icon){$(">div>div:last",node).toggleClass(op.options.folderExp).toggleClass(op.options.folderColl)}}(tree.is(":hidden"))?tree.slideDown("fast"):(isA?"":tree.slideUp("fast"));return false});addSpace(op.level,node);if(op.showSub){tree.subTree(op,op.level+1)}}else{node.children().wrap("<div></div>");$(">div",node).prepend("<div class='node'></div>"+(op.ckbox?"<div class='ckbox "+checked+"'></div>":"")+(op.icon?"<div class='file'></div>":""));addSpace(op.level,node);if(op.isLast){$(node).addClass("last")}}if(op.ckbox){node._check(op)}$(">div",node).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")});if($.browser.msie){$(">div",node).click(function(){$("a",this).trigger("click");return false})}});function addSpace(level,node){if(level>0){var parent=node.parent().parent();var space=!parent.next()[0]?"indent":"line";var plist="<div class='"+space+"'></div>";if(level>1){var next=$(">div>div",parent).filter(":first");var prev="";while(level>1){prev=prev+"<div class='"+next.attr("class")+"'></div>";next=next.next();level--}plist=prev+plist}$(">div",node).prepend(plist)}}},_check:function(op){var node=$(this);var ckbox=$(">div>.ckbox",node);var $input=node.find("a");var tname=$input.attr("tname"),tvalue=$input.attr("tvalue");var attrs="text='"+$input.text()+"' ";if(tname){attrs+="name='"+tname+"' "}if(tvalue){attrs+="value='"+tvalue+"' "}ckbox.append("<input type='checkbox' style='display:none;' "+attrs+"/>").click(function(){var cked=ckbox.hasClass("checked");var aClass=cked?"unchecked":"checked";var rClass=cked?"checked":"unchecked";ckbox.removeClass(rClass).removeClass(!cked?"indeterminate":"").addClass(aClass);$("input",ckbox).attr("checked",!cked);$(">ul",node).find("li").each(function(){var box=$("div.ckbox",this);box.removeClass(rClass).removeClass(!cked?"indeterminate":"").addClass(aClass).find("input").attr("checked",!cked)});$(node)._checkParent();return false});var cAttr=$input.attr("checked");if(cAttr){cAttr=eval(cAttr)}if(cAttr){ckbox.find("input").attr("checked",true);ckbox.removeClass("unchecked").addClass("checked");$(node)._checkParent()}},_checkParent:function(){if($(this).parent().hasClass("tree")){return}var parent=$(this).parent().parent();var stree=$(">ul",parent);var ckbox=stree.find(">li>a").size()+stree.find("div.ckbox").size();var ckboxed=stree.find("div.checked").size();var aClass=(ckboxed==ckbox?"checked":(ckboxed!=0?"indeterminate":"unchecked"));var rClass=(ckboxed==ckbox?"indeterminate":(ckboxed!=0?"checked":"indeterminate"));$(">div>.ckbox",parent).removeClass("unchecked").removeClass("checked").removeClass(rClass).addClass(aClass);parent._checkParent()}})})(jQuery);(function(g){var c=new Map();g.dwz=g.dwz||{};g(window).resize(function(){setTimeout(function(){for(var j=0;j<c.size();j++){d(c.element(j).key)}},100)});g.fn.extend({accordion:function(k,l){var j=Array.prototype.slice.call(arguments,1);return this.each(function(){if(k.fillSpace){c.put(k.fillSpace,this)}if(typeof k=="string"){var m=g.data(this,"dwz-accordion");m[k].apply(m,j)}else{if(!g(this).is(".dwz-accordion")){g.data(this,"dwz-accordion",new g.dwz.accordion(this,k))}}})},activate:function(j){return this.accordion("activate",j)}});g.dwz.accordion=function(j,k){this.options=k=g.extend({},g.dwz.accordion.defaults,k);this.element=j;g(j).addClass("dwz-accordion");if(k.navigation){var m=g(j).find("a").filter(k.navigationFilter);if(m.length){if(m.filter(k.header).length){k.active=m}else{k.active=m.parent().parent().prev();m.addClass("current")}}}k.headers=g(j).find(k.header);k.active=e(k.headers,k.active);if(k.fillSpace){d(k.fillSpace)}else{if(k.autoheight){var l=0;k.headers.next().each(function(){l=Math.max(l,g(this).outerHeight())}).height(l)}}k.headers.not(k.active||"").next().hide();k.active.find("h2").addClass(k.selectedClass);if(k.event){g(j).bind((k.event)+".dwz-accordion",h)}};g.dwz.accordion.prototype={activate:function(j){h.call(this.element,{target:e(this.options.headers,j)[0]})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.options.headers.next().css("display","");if(this.options.fillSpace||this.options.autoheight){this.options.headers.next().css("height","")}g.removeData(this.element,"dwz-accordion");g(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}};function b(k,j){return function(){return k.apply(j,arguments)}}function f(l){if(!g.data(this,"dwz-accordion")){return}var j=g.data(this,"dwz-accordion");var k=j.options;k.running=l?0:--k.running;if(k.running){return}if(k.clearStyle){k.toShow.add(k.toHide).css({height:"",overflow:""})}g(this).triggerHandler("change.dwz-accordion",[k.data],k.change)}function d(k){var n=c.get(k);if(!n){return}var l=g(n).parent();var j=l.height()-((g(".accordionHeader",n).size())*(g(".accordionHeader:first-child",n).outerHeight()))-2;var m=l.children().not(n);g.each(m,function(o){j-=g(m[o]).outerHeight()});g(".accordionContent",n).height(j)}function a(j,n,o,m,p){var l=g.data(this,"dwz-accordion").options;l.toShow=j;l.toHide=n;l.data=o;var k=b(f,this);l.running=n.size()==0?j.size():n.size();if(l.animated){if(!l.alwaysOpen&&m){g.dwz.accordion.animations[l.animated]({toShow:jQuery([]),toHide:n,complete:k,down:p,autoheight:l.autoheight})}else{g.dwz.accordion.animations[l.animated]({toShow:j,toHide:n,complete:k,down:p,autoheight:l.autoheight})}}else{if(!l.alwaysOpen&&m){j.toggle()}else{n.hide();j.show()}k(true)}}function h(o){var m=g.data(this,"dwz-accordion").options;if(m.disabled){return false}if(!o.target&&!m.alwaysOpen){m.active.find("h2").toggleClass(m.selectedClass);var l=m.active.next(),p={instance:this,options:m,newHeader:jQuery([]),oldHeader:m.active,newContent:jQuery([]),oldContent:l},j=m.active=g([]);a.call(this,j,l,p);return false}var n=g(o.target);if(n.parents(m.header).length){while(!n.is(m.header)){n=n.parent()}}var k=n[0]==m.active[0];if(m.running||(m.alwaysOpen&&k)){return false}if(!n.is(m.header)){return}m.active.find("h2").toggleClass(m.selectedClass);if(!k){n.find("h2").addClass(m.selectedClass)}var j=n.next(),l=m.active.next(),p={instance:this,options:m,newHeader:n,oldHeader:m.active,newContent:j,oldContent:l},q=m.headers.index(m.active[0])>m.headers.index(n[0]);m.active=k?g([]):n;a.call(this,j,l,p,k,q);return false}function e(k,j){return j!=undefined?typeof j=="number"?k.filter(":eq("+j+")"):k.not(k.not(j)):j===false?g([]):k.filter(":eq(0)")}g.extend(g.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:true,animated:"slide",event:"click",header:".accordionHeader",autoheight:true,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(j,l){j=g.extend({easing:"swing",duration:300},j,l);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return}var k=j.toHide.height(),m=j.toShow.height(),n=m/k;j.toShow.css({height:0}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate({height:"hide"},{step:function(o){var p=(k-o)*n;if(g.browser.msie||g.browser.opera){p=Math.ceil(p)}j.toShow.height(p)},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoheight){j.toShow.css("height","auto")}j.complete()}})},bounceslide:function(j){this.slide(j,{easing:j.down?"bounceout":"swing",duration:j.down?1000:200})},easeslide:function(j){this.slide(j,{easing:"easeinout",duration:700})}}})})(jQuery);function initEnv(){$("body").append(DWZ.frag.dwzFrag);if($.browser.msie&&/6.0/.test(navigator.userAgent)){try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}if($.browser.msie){window.setInterval("CollectGarbage();",10000)}$(window).resize(function(){initLayout();$(this).trigger("resizeGrid")});var a=$("#background,#progressBar");a.hide();$(document).ajaxStart(function(){a.show()}).ajaxStop(function(){a.hide()});$("#leftside").jBar({minW:150,maxW:700});if($.taskBar){$.taskBar.init()}navTab.init();if($.fn.switchEnv){$("#switchEnvBox").switchEnv()}if($.fn.navMenu){$("#navMenu").navMenu()}setTimeout(function(){initLayout();initUI();var c=$("div.tabsPageHeader");c.find(".tabsLeft").hoverClass("tabsLeftHover");c.find(".tabsRight").hoverClass("tabsRightHover");c.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var c=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5;var a=$(window).height()-$("#header").height()-34;$("#container").width(c);$("#container .tabsPageContent").height(a-34).find("[layoutH]").layoutH();$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(a-5);var b=$("#splitBarProxy");b.bgiframe({height:(a-5)+"px",width:"5px",left:"0px"});b.css({width:"5px"});$("#taskbar").css({top:a+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("table.table",$p).jTable();$("table.list",$p).cssTable();$("div.tabs",$p).each(function(){var $this=$(this);var options={};options.currentIndex=$this.attr("currentIndex")||0;options.eventType=$this.attr("eventType")||"click";$this.tabs(options)});$("ul.tree",$p).jTree();$("div.accordion",$p).each(function(){var $this=$(this);$this.accordion({fillSpace:$this.attr("fillSpace"),alwaysOpen:true,active:0})});$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p);if($.fn.combox){$("select.combox",$p).combox()}if($.fn.xheditor){$("textarea.editor",$p).each(function(){var $this=$(this);var op={html5Upload:false,skin:"vista",tools:$this.attr("tools")||"full"};var upAttrs=[["upLinkUrl","upLinkExt","zip,rar,txt"],["upImgUrl","upImgExt","jpg,jpeg,gif,png"],["upFlashUrl","upFlashExt","swf"],["upMediaUrl","upMediaExt","avi"]];$(upAttrs).each(function(i){var urlAttr=upAttrs[i][0];var extAttr=upAttrs[i][1];if($this.attr(urlAttr)){op[urlAttr]=$this.attr(urlAttr);op[extAttr]=$this.attr(extAttr)||upAttrs[i][2]}});$this.xheditor(op)})}if($.fn.uploadify){$(":file[uploader]",$p).each(function(){var $this=$(this);var options={uploader:$this.attr("uploader"),script:$this.attr("script"),cancelImg:$this.attr("cancelImg"),queueID:$this.attr("fileQueue")||"fileQueue",fileDesc:$this.attr("fileDesc")||"*.jpg;*.jpeg;*.gif;*.png;*.pdf",fileExt:$this.attr("fileExt")||"*.jpg;*.jpeg;*.gif;*.png;*.pdf",folder:$this.attr("folder"),auto:true,multi:true,onError:uploadifyError,onComplete:uploadifyComplete,onAllComplete:uploadifyAllComplete};if($this.attr("onComplete")){options.onComplete=DWZ.jsonEval($this.attr("onComplete"))}if($this.attr("onAllComplete")){options.onAllComplete=DWZ.jsonEval($this.attr("onAllComplete"))}if($this.attr("scriptData")){options.scriptData=DWZ.jsonEval($this.attr("scriptData"))}$this.uploadify(options)})}$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus");$("input[readonly], textarea[readonly]",$p).addClass("readonly");$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled");$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert();$("div.panelBar li, div.panelBar",$p).hoverClass("hover");$("div.button",$p).hoverClass("buttonHover");$("div.buttonActive",$p).hoverClass("buttonActiveHover");$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover");$("div.panel",$p).jPanel();$("form.required-validate",$p).each(function(){$(this).validate({focusInvalid:false,focusCleanup:true,errorElement:"span",ignore:".ignore",invalidHandler:function(form,validator){var errors=validator.numberOfInvalids();if(errors){var message=DWZ.msg("validateFormError",[errors]);alertMsg.error(message)}}})});if($.fn.datepicker){$("input.date",$p).each(function(){var $this=$(this);var opts={};if($this.attr("format")){opts.pattern=$this.attr("format")}if($this.attr("yearstart")){opts.yearstart=$this.attr("yearstart")}if($this.attr("yearend")){opts.yearend=$this.attr("yearend")}$this.datepicker(opts)})}$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var tabid=$this.attr("rel")||"_blank";var fresh=eval($this.attr("fresh")||"true");var external=eval($this.attr("external")||"false");var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external});event.preventDefault()})});$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var rel=$this.attr("rel")||"_blank";var options={};var w=$this.attr("width");var h=$this.attr("height");if(w){options.width=w}if(h){options.height=h}options.max=eval($this.attr("max")||"false");options.mask=eval($this.attr("mask")||"false");options.maxable=eval($this.attr("maxable")||"true");options.minable=eval($this.attr("minable")||"true");options.fresh=eval($this.attr("fresh")||"true");options.resizable=eval($this.attr("resizable")||"true");options.drawable=eval($this.attr("drawable")||"true");options.close=eval($this.attr("close")||"");options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.pdialog.open(url,rel,title,options);return false})});$("a[target=ajax]",$p).each(function(){$(this).click(function(event){var $this=$(this);var rel=$this.attr("rel");if(rel){var $rel=$("#"+rel);$rel.loadUrl($this.attr("href"),{},function(){$rel.find("[layoutH]").layoutH()})}event.preventDefault()})});$("div.pagination",$p).each(function(){var $this=$(this);$this.pagination({targetType:$this.attr("targetType"),rel:$this.attr("rel"),totalCount:$this.attr("totalCount"),numPerPage:$this.attr("numPerPage"),pageNumShown:$this.attr("pageNumShown"),currentPage:$this.attr("currentPage")})});if($.fn.ajaxTodo){$("a[target=ajaxTodo]",$p).ajaxTodo()}if($.fn.dwzExport){$("a[target=dwzExport]",$p).dwzExport()}if($.fn.lookup){$("a[lookupGroup]",$p).lookup()}if($.fn.multLookup){$("[multLookup]:button",$p).multLookup()}if($.fn.suggest){$("input[suggestFields]",$p).suggest()}if($.fn.itemDetail){$("table.itemDetail",$p).itemDetail()}if($.fn.selectedTodo){$("a[target=selectedTodo]",$p).selectedTodo()}if($.fn.pagerForm){$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}}$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(a){return $.regional.alertMsg.title[a]},_open:function(e,g,f){$(this._boxId).remove();var a="";if(f){for(var d=0;d<f.length;d++){var c=f[d].call?"callback":"";a+=DWZ.frag.alertButFrag.replace("#butMsg#",f[d].name).replace("#callback#",c)}}var h=DWZ.frag.alertBoxFrag.replace("#type#",e).replace("#title#",this._getTitle(e)).replace("#message#",g).replace("#butFragment#",a);$(h).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500);if(this._closeTimer){clearTimeout(this._closeTimer);this._closeTimer=null}if(this._types.info==e||this._types.correct==e){this._closeTimer=setTimeout(function(){alertMsg.close()},3500)}else{$(this._bgId).show()}var b=$(this._boxId).find("[rel=callback]");for(var d=0;d<f.length;d++){if(f[d].call){b.eq(d).click(f[d].call)}}},close:function(){$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()});$(this._bgId).hide()},error:function(b,a){this._alert(this._types.error,b,a)},info:function(b,a){this._alert(this._types.info,b,a)},warn:function(b,a){this._alert(this._types.warn,b,a)},correct:function(b,a){this._alert(this._types.correct,b,a)},_alert:function(b,d,a){var e={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(e,a);var c=[{name:e.okName,call:e.okCall}];this._open(b,d,c)},confirm:function(c,a){var d={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(d,a);var b=[{name:d.okName,call:d.okCall},{name:d.cancelName,call:d.cancelCall}];this._open(this._types.confirm,c,b)}};(function(b){var e,f,d;b.fn.extend({contextMenu:function(k,h){var j=b.extend({shadow:true,bindings:{},ctrSub:null},h);if(!e){e=b('<div id="contextmenu"></div>').appendTo("body").hide()}if(!f){f=b('<div id="contextmenuShadow"></div>').appendTo("body").hide()}d=d||[];d.push({id:k,shadow:j.shadow,bindings:j.bindings||{},ctrSub:j.ctrSub});var g=d.length-1;b(this).bind("contextmenu",function(l){c(g,this,l,j);return false});return this}});function c(j,h,l,g){var n=d[j];var k=b(DWZ.frag[n.id]);k.find("li").hoverClass();e.html(k);b.each(n.bindings,function(q,p){b("[rel='"+q+"']",e).bind("click",function(r){a();p(b(h),b("#"+n.id))})});var o=l.pageX;var m=l.pageY;if(b(window).width()<o+e.width()){o-=e.width()}if(b(window).height()<m+e.height()){m-=e.height()}e.css({left:o,top:m}).show();e.bgiframe({width:e.width()+3,height:e.height()+3});if(n.shadow){f.css({width:e.width(),height:e.height(),left:o+3,top:m+3}).show()}b(document).one("click",a);if(b.isFunction(n.ctrSub)){n.ctrSub(b(h),b("#"+n.id))}}function a(){e.hide();f.hide()}})(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(a){if($.History){$.History.init("#container")}var b=this;$.extend(this._op,a);this.componentBox=$("#"+this._op.id);this._tabBox=this.componentBox.find(this._op.stTabBox);this._panelBox=this.componentBox.find(this._op.stPanelBox);this._prevBut=this.componentBox.find("."+this._op.prevClass);this._nextBut=this.componentBox.find("."+this._op.nextClass);this._moreBut=this.componentBox.find(this._op.stMore);this._moreBox=this.componentBox.find(this._op.stMoreLi);this._prevBut.click(function(c){b._scrollPrev()});this._nextBut.click(function(c){b._scrollNext()});this._moreBut.click(function(){b._moreBox.show();b._moreBox.bgiframe();return false});$(document).click(function(){b._moreBox.hide()});this._contextmenu(this._tabBox);this._contextmenu(this._getTabs());this._init();this._ctrlScrollBut()},_init:function(){var a=this;this._getTabs().each(function(b){$(this).unbind("click").click(function(c){a._switchTab(b)});$(this).find(navTab._op.close$).unbind("click").click(function(){a._closeTab(b)})});this._getMoreLi().each(function(b){$(this).find(">a").unbind("click").click(function(c){a._switchTab(b)})});this._switchTab(this._currentIndex)},_contextmenu:function(b){var a=this;b.contextMenu("navTabCM",{bindings:{reload:function(d,c){a._reload(d,true)},closeCurrent:function(e,c){var d=e.attr("tabid");if(d){a.closeTab(d)}else{a.closeCurrentTab()}},closeOther:function(e,c){var d=a._indexTabId(e.attr("tabid"));a._closeOtherTab(d>0?d:a._currentIndex)},closeAll:function(d,c){a.closeAllTab()}},ctrSub:function(f,c){var g=c.find("[rel='reload']");var h=c.find("[rel='closeCurrent']");var j=c.find("[rel='closeOther']");var e=c.find("[rel='closeAll']");var d=a._getTabs();if(d.size()<2){h.addClass("disabled");j.addClass("disabled");e.addClass("disabled")}if(a._currentIndex==0||f.attr("tabid")==a._op.mainTabId){h.addClass("disabled");g.addClass("disabled")}else{if(d.size()==2){j.addClass("disabled")}}}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(a){var b=this._indexTabId(a);if(b>=0){return this._getTabs().eq(b)}},_getPanel:function(a){var b=this._indexTabId(a);if(b>=0){return this._getPanels().eq(b)}},_getTabsW:function(b,a){return this._tabsW(this._getTabs().slice(b,a))},_tabsW:function(a){var b=0;a.each(function(){b+=$(this).outerWidth(true)});return b},_indexTabId:function(b){if(!b){return -1}var a=-1;this._getTabs().each(function(c){if($(this).attr("tabid")==b){a=c;return}});return a},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){var d=this._getLeft(),b=0;var a=this._getTabs();for(var c=0;c<a.size();c++){if(b+d>=0){return c}b+=a.eq(c).outerWidth(true)}return 0},_visibleEnd:function(){var d=this._getLeft(),b=0;var a=this._getTabs();for(var c=0;c<a.size();c++){b+=a.eq(c).outerWidth(true);if(b+d>this._getScrollBarW()){return c}}return a.size()},_scrollPrev:function(){var a=this._visibleStart();if(a>0){this._scrollTab(-this._getTabsW(0,a-1))}},_scrollNext:function(){var a=this._visibleEnd();if(a<this._getTabs().size()){this._scrollTab(-this._getTabsW(0,a+1)+this._getScrollBarW())}},_scrollTab:function(c,a){var b=this;this._tabBox.animate({left:c+"px"},200,function(){b._ctrlScrollBut()})},_scrollCurrent:function(){var a=this._tabsW(this._getTabs());if(a<=this._getScrollBarW()){this._scrollTab(0)}else{if(this._getLeft()<this._getScrollBarW()-a){this._scrollTab(this._getScrollBarW()-a)}else{if(this._currentIndex<this._visibleStart()){this._scrollTab(-this._getTabsW(0,this._currentIndex))}else{if(this._currentIndex>=this._visibleEnd()){this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(true)-this._getTabsW(0,this._currentIndex))}}}}},_ctrlScrollBut:function(){var a=this._tabsW(this._getTabs());if(this._getScrollBarW()>a){this._prevBut.hide();this._nextBut.hide();this._tabBox.parent().removeClass("tabsPageHeaderMargin")}else{this._prevBut.show().removeClass("tabsLeftDisabled");this._nextBut.show().removeClass("tabsRightDisabled");this._tabBox.parent().addClass("tabsPageHeaderMargin");if(this._getLeft()>=0){this._prevBut.addClass("tabsLeftDisabled")}else{if(this._getLeft()<=this._getScrollBarW()-a){this._nextBut.addClass("tabsRightDisabled")}}}},_switchTab:function(f){var a=true;if(this._currentIndex==f){}if(a){var e=this._getPanels().eq(this._currentIndex);var c=this._getPanels().eq(f);if(e.find("iframe").get(0)&&e.find("iframe").get(0).contentWindow.tabOut){var b=e.find("iframe").get(0).contentWindow.tabOut();if(b===false){return}}if(c.find("iframe").get(0)&&c.find("iframe").get(0).contentWindow.tabIn){var b=c.find("iframe").get(0).contentWindow.tabIn();if(b===false){return}}}var d=this._getTabs().removeClass("selected").eq(f).addClass("selected");this._getPanels().hide().eq(f).show();this._getMoreLi().removeClass("selected").eq(f).addClass("selected");this._currentIndex=f;this._scrollCurrent();this._reload(d)},_closeTab:function(a){this._getTabs().eq(a).remove();this._getPanels().eq(a).remove();this._getMoreLi().eq(a).remove();if(this._currentIndex>=a){this._currentIndex--}this._init();this._scrollCurrent();this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(a){var b=this._indexTabId(a);if(b>0){this._closeTab(b)}},closeCurrentTab:function(){if(this._currentIndex>0){this._closeTab(this._currentIndex)}},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove();this._getPanels().filter(":gt(0)").remove();this._getMoreLi().filter(":gt(0)").remove();this._currentIndex=0;this._init();this._scrollCurrent()},_closeOtherTab:function(a){a=a||this._currentIndex;if(a>0){var b=":eq("+a+")";this._getTabs().not(b).filter(":gt(0)").remove();this._getPanels().not(b).filter(":gt(0)").remove();this._getMoreLi().not(b).filter(":gt(0)").remove();this._currentIndex=1;this._init();this._scrollCurrent()}else{this.closeAllTab()}},_loadUrlCallback:function(a){a.find("[layoutH]").layoutH();a.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(c,a){a=a||c.data("reloadFlag");var b=c.attr("url");if(a&&b){c.data("reloadFlag",null);var d=this._getPanel(c.attr("tabid"));if(c.hasClass("external")){navTab.openExternal(b,d)}else{d.loadUrl(b,{},function(){navTab._loadUrlCallback(d)})}}},reloadFlag:function(a){var b=this._getTab(a);if(b){if(this._indexTabId(a)==this._currentIndex){this._reload(b,true)}else{b.data("reloadFlag",1)}}},reload:function(b,a){var e=$.extend({data:{},navTabId:"",callback:null},a);var c=e.navTabId?this._getTab(e.navTabId):this._getTabs().eq(this._currentIndex);var d=e.navTabId?this._getPanel(e.navTabId):this._getPanels().eq(this._currentIndex);if(d){if(!b){b=c.attr("url")}if(b){if(c.hasClass("external")){navTab.openExternal(b,d)}else{d.ajaxUrl({type:"POST",url:b,data:e.data,callback:function(f){navTab._loadUrlCallback(d);if($.isFunction(e.callback)){e.callback(f)}}})}}}},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var a=DWZ.jsonEval(this.getCurrentPanel().html());if(a&&a.statusCode==DWZ.statusCode.timeout){this.closeCurrentTab()}},openExternal:function(a,c){var b=navTab._panelBox.height();c.html(DWZ.frag.externalFrag.replaceAll("{url}",a).replaceAll("{height}",b+"px"))},openTab:function(b,c,m){var g=this._getPanels().eq(this._currentIndex);if(g.find("iframe").get(0)&&g.find("iframe").get(0).contentWindow.tabOpen){var k=g.find("iframe").get(0).contentWindow.tabOpen();if(k===false){return}}var f=$.extend({title:"New Tab",data:{},fresh:true,external:false},m);var d=this._indexTabId(b);if(d>=0){var j=this._getTabs().eq(d);var a=j.attr("tabid")==this._op.mainTabId?"> span > span":"> span";j.find(">a").attr("title",f.title).find(a).text(f.title);var l=this._getPanels().eq(d);if(f.fresh||j.attr("url")!=c){j.attr("url",c);if(f.external||c.isExternalUrl()){j.addClass("external");navTab.openExternal(c,l)}else{j.removeClass("external");l.ajaxUrl({type:"GET",url:c,data:f.data,callback:function(){navTab._loadUrlCallback(l)}})}}this._currentIndex=d}else{var e='<li tabid="#tabid#"><a href="javascript:" title="#title#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(e.replace("#tabid#",b).replaceAll("#title#",f.title));this._panelBox.append('<div class="page unitBox"></div>');this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",f.title));var h=this._getTabs();var j=h.filter(":last");var l=this._getPanels().filter(":last");if(f.external||c.isExternalUrl()){j.addClass("external");navTab.openExternal(c,l)}else{j.removeClass("external");l.ajaxUrl({type:"GET",url:c,data:f.data,callback:function(){navTab._loadUrlCallback(l)}})}if($.History){setTimeout(function(){$.History.addHistory(b,function(n){var o=navTab._indexTabId(n);if(o>=0){navTab._switchTab(o)}},b)},10)}this._currentIndex=h.size()-1;this._contextmenu(h.filter(":last").hoverClass("hover"))}this._init();this._scrollCurrent();this._getTabs().eq(this._currentIndex).attr("url",c)}};(function(a){a.fn.extend({jresize:function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div[class^='resizable']",c).each(function(){a(this).hide()})})}}return this.each(function(){var d=a(this);var c=a(".resizable");a("div[class^='resizable']",d).each(function(){var e=this;a(e).mousedown(function(f){a.pdialog.switchDialog(d);a.resizeTool.start(c,d,f,a(e).attr("tar"));return false}).show()})})}});a.resizeTool={start:function(c,b,f,d){a.pdialog.initResize(c,b,d);a.data(c[0],"layer-drag",{options:a.extend(a.pdialog._op,{target:d,dialog:b,stop:a.resizeTool.stop})});a.layerdrag.start(c[0],f,a.pdialog._op)},stop:function(){var b=a.data(arguments[0],"layer-drag");a.pdialog.resizeDialog(arguments[0],b.options.dialog,b.options.target);a("body").css("cursor","");a(arguments[0]).hide()}};a.layerdrag={start:function(d,c,b){if(!a.layerdrag.current){a.layerdrag.current={el:d,oleft:parseInt(d.style.left)||0,owidth:parseInt(d.style.width)||0,otop:parseInt(d.style.top)||0,oheight:parseInt(d.style.height)||0,ox:c.pageX||c.screenX,oy:c.pageY||c.clientY};a(document).bind("mouseup",a.layerdrag.stop);a(document).bind("mousemove",a.layerdrag.drag)}return a.layerdrag.preventEvent(c)},drag:function(k){if(!k){var k=window.event}var j=a.layerdrag.current;var g=a.data(j.el,"layer-drag");var c=(k.pageX||k.screenX)-j.ox;var d=(k.pageY||k.clientY)-j.oy;if((k.pageY||k.clientY)<=0||(k.pageY||k.clientY)>=(a(window).height()-a(".dialogHeader",a(g.options.dialog)).outerHeight())){return false}var h=g.options.target;var f=j.owidth;var b=j.oheight;if(h!="n"&&h!="s"){f+=(h.indexOf("w")>=0)?-c:c}if(f>=a.pdialog._op.minW){if(h.indexOf("w")>=0){j.el.style.left=(j.oleft+c)+"px"}if(h!="n"&&h!="s"){j.el.style.width=f+"px"}}if(h!="w"&&h!="e"){b+=(h.indexOf("n")>=0)?-d:d}if(b>=a.pdialog._op.minH){if(h.indexOf("n")>=0){j.el.style.top=(j.otop+d)+"px"}if(h!="w"&&h!="e"){j.el.style.height=b+"px"}}return a.layerdrag.preventEvent(k)},stop:function(d){var c=a.layerdrag.current;var b=a.data(c.el,"layer-drag");a(document).unbind("mousemove",a.layerdrag.drag);a(document).unbind("mouseup",a.layerdrag.stop);if(b.options.stop){b.options.stop.apply(c.el,[c.el])}a.layerdrag.current=null;return a.layerdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function(a){a.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:false,mask:false,resizable:true,drawable:true,maxable:true,minable:true,fresh:true},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(c,b){var f=a.extend({data:{},dialogId:"",callback:null},b);var d=(f.dialogId&&a("body").data(f.dialogId))||this._current;if(d){var e=d.find(".dialogContent");e.ajaxUrl({type:"POST",url:c,data:f.data,callback:function(g){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a(":button.close",d).click(function(){a.pdialog.close(d);return false});if(a.isFunction(f.callback)){f.callback(g)}}})}},open:function(c,f,g,b){var h=a.extend({},a.pdialog._op,b);var d=a("body").data(f);if(d){if(d.is(":hidden")){d.show()}if(h.fresh||c!=a(d).data("url")){d.data("url",c);d.find(".dialogHeader").find("h1").html(g);this.switchDialog(d);var e=d.find(".dialogContent");e.loadUrl(c,{},function(){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a("button.close").click(function(){a.pdialog.close(d);return false})})}}else{a("body").append(DWZ.frag.dialogFrag);d=a(">.dialog:last-child","body");d.data("id",f);d.data("url",c);if(b.close){d.data("close",b.close)}if(b.param){d.data("param",b.param)}(a.fn.bgiframe&&d.bgiframe());d.find(".dialogHeader").find("h1").html(g);a(d).css("zIndex",(a.pdialog._zIndex+=2));a("div.shadow").css("zIndex",a.pdialog._zIndex-3).show();a.pdialog._init(d,b);a(d).click(function(){a.pdialog.switchDialog(d)});if(h.resizable){d.jresize()}if(h.drawable){d.dialogDrag()}a("a.close",d).click(function(j){a.pdialog.close(d);return false});if(h.maxable){a("a.maximize",d).show().click(function(j){a.pdialog.switchDialog(d);a.pdialog.maxsize(d);d.jresize("destroy").dialogDrag("destroy");return false})}else{a("a.maximize",d).hide()}a("a.restore",d).click(function(j){a.pdialog.restore(d);d.jresize().dialogDrag();return false});if(h.minable){a("a.minimize",d).show().click(function(j){a.pdialog.minimize(d);return false})}else{a("a.minimize",d).hide()}a("div.dialogHeader a",d).mousedown(function(){return false});a("div.dialogHeader",d).dblclick(function(){if(a("a.restore",d).is(":hidden")){a("a.maximize",d).trigger("click")}else{a("a.restore",d).trigger("click")}});if(h.max){a.pdialog.maxsize(d);d.jresize("destroy").dialogDrag("destroy")}a("body").data(f,d);a.pdialog._current=d;a.pdialog.attachShadow(d);var e=a(".dialogContent",d);e.loadUrl(c,{},function(){e.find("[layoutH]").layoutH(e);a(".pageContent",d).width(a(d).width()-14);a("button.close").click(function(){a.pdialog.close(d);return false})})}if(h.mask){a(d).css("zIndex",1000);a("a.minimize",d).hide();a(d).data("mask",true);a("#dialogBackground").show()}else{if(h.minable){a.taskBar.addDialog(f,g)}}},switchDialog:function(c){var b=a(c).css("zIndex");a.pdialog.attachShadow(c);if(a.pdialog._current){var d=a(a.pdialog._current).css("zIndex");a(a.pdialog._current).css("zIndex",b);a(c).css("zIndex",d);a("div.shadow").css("zIndex",d-1);a.pdialog._current=c}a.taskBar.switchTask(c.data("id"))},attachShadow:function(b){var c=a("div.shadow");if(c.is(":hidden")){c.show()}c.css({top:parseInt(a(b)[0].style.top)-2,left:parseInt(a(b)[0].style.left)-4,height:parseInt(a(b).height())+8,width:parseInt(a(b).width())+8,zIndex:parseInt(a(b).css("zIndex"))-1});a(".shadow_c",c).children().andSelf().each(function(){a(this).css("height",a(b).outerHeight()-4)})},_init:function(d,c){var g=a.extend({},this._op,c);var b=g.height>g.minH?g.height:g.minH;var e=g.width>g.minW?g.width:g.minW;if(isNaN(d.height())||d.height()<b){a(d).height(b+"px");a(".dialogContent",d).height(b-a(".dialogHeader",d).outerHeight()-a(".dialogFooter",d).outerHeight()-6)}if(isNaN(d.css("width"))||d.width()<e){a(d).width(e+"px")}var f=(a(window).height()-d.height())/2;d.css({left:(a(window).width()-d.width())/2,top:f>0?f:0})},initResize:function(c,b,d){a("body").css("cursor",d+"-resize");c.css({top:a(b).css("top"),left:a(b).css("left"),height:a(b).css("height"),width:a(b).css("width")});c.show()},repaint:function(c,b){var d=a("div.shadow");if(c!="w"&&c!="e"){d.css("height",d.outerHeight()+b.tmove);a(".shadow_c",d).children().andSelf().each(function(){a(this).css("height",a(this).outerHeight()+b.tmove)})}if(c=="n"||c=="nw"||c=="ne"){d.css("top",b.otop-2)}if(b.owidth&&(c!="n"||c!="s")){d.css("width",b.owidth+8)}if(c.indexOf("w")>=0){d.css("left",b.oleft-4)}},resizeTool:function(d,c,b){a("div[class^='resizable']",b).filter(function(){return a(this).attr("tar")=="w"||a(this).attr("tar")=="e"}).each(function(){a(this).css("height",a(this).outerHeight()+c)})},resizeDialog:function(j,d,h){var c=parseInt(j.style.left);var f=parseInt(j.style.top);var b=parseInt(j.style.height);var e=parseInt(j.style.width);if(h=="n"||h=="nw"){tmove=parseInt(a(d).css("top"))-f}else{tmove=b-parseInt(a(d).css("height"))}a(d).css({left:c,width:e,top:f,height:b});a(".dialogContent",d).css("width",(e-12)+"px");a(".pageContent",d).css("width",(e-14)+"px");if(h!="w"&&h!="e"){var g=a(".dialogContent",d);g.css({height:b-a(".dialogHeader",d).outerHeight()-a(".dialogFooter",d).outerHeight()-6});g.find("[layoutH]").layoutH(g);a.pdialog.resizeTool(h,tmove,d)}a.pdialog.repaint(h,{oleft:c,otop:f,tmove:tmove,owidth:e});a(window).trigger("resizeGrid")},close:function(b){if(typeof b=="string"){b=a("body").data(b)}var e=b.data("close");var c=true;if(e&&a.isFunction(e)){var d=b.data("param");if(d&&d!=""){d=DWZ.jsonEval(d);c=e(d)}else{c=e()}if(!c){return}}if(a.fn.xheditor){a("textarea.editor",b).xheditor(false)}a(b).unbind("click").hide();a("div.dialogContent",b).html("");a("div.shadow").hide();if(a(b).data("mask")){a("#dialogBackground").hide()}else{a.taskBar.closeDialog(a(b).data("id"))}a("body").removeData(a(b).data("id"));a(b).remove()},closeCurrent:function(){this.close(a.pdialog._current)},checkTimeout:function(){var c=a(".dialogContent",a.pdialog._current);var b=DWZ.jsonEval(c.html());if(b&&b.statusCode==DWZ.statusCode.timeout){this.closeCurrent()}},maxsize:function(c){a(c).data("original",{top:a(c).css("top"),left:a(c).css("left"),width:a(c).css("width"),height:a(c).css("height")});a("a.maximize",c).hide();a("a.restore",c).show();var d=a(window).width();var b=a(window).height()-34;a(c).css({top:"0px",left:"0px",width:d+"px",height:b+"px"});a.pdialog._resizeContent(c,d,b)},restore:function(c){var b=a(c).data("original");var d=parseInt(b.width);var e=parseInt(b.height);a(c).css({top:b.top,left:b.left,width:d,height:e});a.pdialog._resizeContent(c,d,e);a("a.maximize",c).show();a("a.restore",c).hide();a.pdialog.attachShadow(c)},minimize:function(c){a(c).hide();a("div.shadow").hide();var b=a.taskBar.getTask(a(c).data("id"));a(".resizable").css({top:a(c).css("top"),left:a(c).css("left"),height:a(c).css("height"),width:a(c).css("width")}).show().animate({top:a(window).height()-60,left:b.position().left,width:b.outerWidth(),height:b.outerHeight()},250,function(){a(this).hide();a.taskBar.inactive(a(c).data("id"))})},_resizeContent:function(c,d,b){var e=a(".dialogContent",c);e.css({width:(d-12)+"px",height:b-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6});e.find("[layoutH]").layoutH(e);a(".pageContent",c).css("width",(d-14)+"px");a(window).trigger("resizeGrid")}}})(jQuery);(function(a){a.fn.dialogDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div.dialogHeader",c).unbind("mousedown")})}}return this.each(function(){var c=a(this);a("div.dialogHeader",c).mousedown(function(d){a.pdialog.switchDialog(c);c.data("task",true);setTimeout(function(){if(c.data("task")){a.dialogDrag.start(c,d)}},100);return false}).mouseup(function(d){c.data("task",false);return false})})};a.dialogDrag={currId:null,_init:function(b){this.currId=new Date().getTime();var c=a("#dialogProxy");if(!c.size()){c=a(DWZ.frag.dialogProxy);a("body").append(c)}a("h1",c).html(a(".dialogHeader h1",b).text())},start:function(c,d){this._init(c);var b=a("#dialogProxy");b.css({left:c.css("left"),top:c.css("top"),height:c.css("height"),width:c.css("width"),zIndex:parseInt(c.css("zIndex"))+1}).show();a("div.dialogContent",b).css("height",a("div.dialogContent",c).css("height"));b.data("dialog",c);c.css({left:"-10000px",top:"-10000px"});a(".shadow").hide();a(b).jDrag({selector:".dialogHeader",stop:this.stop,event:d});return false},stop:function(){var c=a(arguments[0]);var b=c.data("dialog");a(b).css({left:a(c).css("left"),top:a(c).css("top")});a.pdialog.attachShadow(b);a(c).hide()}}})(jQuery);(function(a){a.fn.extend({cssTable:function(b){return this.each(function(){var f=a(this);var e=f.find("tbody>tr");var c=f.parent();var d=f.hasClass("nowrap");e.hoverClass("hover").each(function(g){var h=a(this);if(!d&&g%2==1){h.addClass("trbg")}h.click(function(){e.filter(".selected").removeClass("selected");h.addClass("selected");var j=h.attr("target");if(j){if(a("#"+j,c).size()==0){c.prepend('<input id="'+j+'" type="hidden" />')}a("#"+j,c).val(h.attr("rel"))}})});f.find("thead [orderField]").orderBy({targetType:f.attr("targetType"),asc:f.attr("asc")||"asc",desc:f.attr("desc")||"desc"})})}})})(jQuery);(function(a){a.fn.jTable=function(b){return this.each(function(){var m=a(this),w=m.attr("nowrapTD");var s=m.width();var d=[];var j=m.parent().addClass("j-resizeGrid");var t=a(this).attr("layoutH");var o=m.find("thead>tr:last-child").find("th");for(var u=0,r=o.size();u<r;u++){var g=a(o[u]);var v=[],q=g.innerWidth()-(100*g.innerWidth()/s)-2;v[0]=parseInt(q);v[1]=g.attr("align");d[d.length]=v}a(this).wrap("<div class='grid'></div>");var h=m.parent().html(m.html());var y=h.find("thead");y.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(s-20)+"px;'></table></div></div>");var p=a(">tr:last-child",y);var f=a(">th",p);a("th",y).each(function(){var l=a(this);l.html("<div class='gridCol' title='"+l.text()+"'>"+l.html()+"</div>")});f.each(function(l){var B=a(this),A=d[l];B.addClass(A[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(A[0])}).filter("[orderField]").orderBy({targetType:m.attr("targetType"),asc:m.attr("asc")||"asc",desc:m.attr("desc")||"desc"});var c=h.find(">tbody");var e=t?" layoutH='"+t+"'":"";c.wrap("<div class='gridScroller'"+e+" style='width:"+j.width()+"px;'><div class='gridTbody'><table style='width:"+(s-20)+"px;'></table></div></div>");var n=a(">tr:first-child",c);var z=c.find(">tr");z.hoverClass().each(function(){var C=a(this);var A=a(">td",this);for(var B=0;B<A.size();B++){var l=a(A[B]);if(w!="false"){l.html("<div>"+l.html()+"</div>")}if(B<d.length){l.addClass(d[B][1])}}C.click(function(){z.filter(".selected").removeClass("selected");C.addClass("selected");var D=C.attr("target");if(D){if(a("#"+D,h).size()==0){h.prepend('<input id="'+D+'" type="hidden" />')}a("#"+D,h).val(C.attr("rel"))}})});a(">td",n).each(function(l){if(l<d.length){a(this).width(d[l][0])}});h.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var x=a(".gridScroller",h);x.scroll(function(A){var B=a(".gridThead",h);if(x.scrollLeft()>0){B.css("position","relative");var l=x.scrollLeft();B.css("left",x.cssv("left")-l)}if(x.scrollLeft()==0){B.css("position","relative");B.css("left","0px")}return false});a(">tr",y).each(function(){a(">th",this).each(function(l){var B=this,A=a(this);A.mouseover(function(C){var D=a.jTableTool.getOffset(B,C).offsetX;if(A.outerWidth()-D<5){A.css("cursor","col-resize").mousedown(function(E){a(".resizeProxy",h).show().css({left:a.jTableTool.getRight(B)-a(".gridScroller",h).scrollLeft(),top:a.jTableTool.getTop(B),height:a.jTableTool.getHeight(B,h),cursor:"col-resize"});a(".resizeMarker",h).show().css({left:a.jTableTool.getLeft(B)+1-a(".gridScroller",h).scrollLeft(),top:a.jTableTool.getTop(B),height:a.jTableTool.getHeight(B,h)});a(".resizeProxy",h).jDrag(a.extend(b,{scop:true,cellMinW:20,relObj:a(".resizeMarker",h)[0],move:"horizontal",event:E,stop:function(){var K=a(".resizeProxy",h).position().left;var N=a(".resizeMarker",h).position().left;var H=K-N-A.outerWidth()-9;var M=a.jTableTool.getColspan(A);var L=a.jTableTool.getCellNum(A);var O=A.width(),F=A.width()+H;var G=a(">td",n).eq(L-1);A.width(F+"px");G.width(F+"px");var J=a(y).parent();J.width((J.width()-O+F)+"px");var I=a(c).parent();I.width((I.width()-O+F)+"px");a(".resizeMarker,.resizeProxy",h).hide()}}))})}else{A.css("cursor",A.attr("orderField")?"pointer":"default");A.unbind("mousedown")}return false})})});function k(){a("div.j-resizeGrid").each(function(){var l=a(this).innerWidth();if(l){a("div.gridScroller",this).width(l+"px")}})}a(window).unbind("resizeGrid").bind("resizeGrid",k)})};a.jTableTool={getLeft:function(c){var b=0;a(c).prevAll().each(function(){b+=a(this).outerWidth()});return b-1},getRight:function(c){var b=0;a(c).prevAll().andSelf().each(function(){b+=a(this).outerWidth()});return b-1},getTop:function(c){var b=0;a(c).parent().prevAll().each(function(){b+=a(this).outerHeight()});return b},getHeight:function(e,d){var b=0;var c=a(e).parent();c.nextAll().andSelf().each(function(){b+=a(this).outerHeight()});a(".gridTbody",d).children().each(function(){b+=a(this).outerHeight()});return b},getCellNum:function(b){return a(b).prevAll().andSelf().size()},getColspan:function(b){return a(b).attr("colspan")||1},getStart:function(b){var c=1;a(b).prevAll().each(function(){c+=parseInt(a(this).attr("colspan")||1)});return c},getPageCoord:function(b){var c={x:0,y:0};while(b){c.x+=b.offsetLeft;c.y+=b.offsetTop;b=b.offsetParent}return c},getOffset:function(h,c){if(a.browser.msie){var d=a(h).offset();var f={offsetX:c.pageX||c.screenX,offsetY:c.pageY||c.screenY};var j={offsetX:f.offsetX-d.left,offsetY:f.offsetY-d.top};return j}var g=c.target;if(g.offsetLeft==undefined){g=g.parentNode}var e=a.jTableTool.getPageCoord(g);var b={x:window.pageXOffset+c.clientX,y:window.pageYOffset+c.clientY};var j={offsetX:b.x-e.x,offsetY:b.y-e.y};return j}}})(jQuery);(function(a){a.extend(a.fn,{jPanel:function(b){var c=a.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},b);return this.each(function(){var o=a(this);var m=o.hasClass("close");var j=o.hasClass("collapse");var e=a(">div",o).addClass(c.content);var k=a(">h1",o).wrap("<div><div></div></div>");if(j){a('<a href=""></a>').addClass(m?c.exp:c.coll).insertAfter(k)}var h=a(">div:first",o).addClass(c.header);a(">div",h).addClass(c.headerC);var l=a("<div><div></div></div>").appendTo(o).addClass(c.footer);a(">div",l).addClass(c.footerC);var f=o.attr("defH")?o.attr("defH"):0;var n=o.attr("minH")?o.attr("minH"):0;if(m){e.css({height:"0px",display:"none"})}else{e.css("height","auto");if(f>0){e.height(f+"px")}else{if(n>0){e.css("minHeight",n+"px")}}}if(!j){return}var d=a("a",h);var g=e.innerHeight()-6;if(n>0&&n>=g){f=n}else{f=g}d.click(function(){if(d.hasClass(c.exp)){e.jBlindDown({to:f,call:function(){d.removeClass(c.exp).addClass(c.coll);if(n>0){e.css("minHeight",n+"px")}}})}else{if(n>0){e.css("minHeight","")}if(n>=g){e.css("height",n+"px")}e.jBlindUp({call:function(){d.removeClass(c.coll).addClass(c.exp)}})}return false})})}})})(jQuery);(function(a){a.fn.extend({checkboxCtrl:function(b){return this.each(function(){var c=a(this);c.click(function(){var e=c.attr("group");if(c.is(":checkbox")){var d=c.is(":checked")?"all":"none";if(e){a.checkbox.select(e,d,b)}}else{if(e){a.checkbox.select(e,c.attr("selectType")||"all",b)}}})})}});a.checkbox={selectAll:function(b,c){this.select(b,"all",c)},unSelectAll:function(b,c){this.select(b,"none",c)},selectInvert:function(b,c){this.select(b,"invert",c)},select:function(b,c,d){$parent=a(d||document);$checkboxLi=$parent.find(":checkbox[name='"+b+"']");switch(c){case"invert":$checkboxLi.each(function(){$checkbox=a(this);$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",false);break;default:$checkboxLi.attr("checked",true);break}}}})(jQuery);
//drag_win.js
	$(function(){var b=baseTools.getUrlQueryString("drag_win_id");b=b||"main";if(typeof external.DragForm!="undefined"){var c=false;var a,d;$(".top_rq").mousedown(function(f){var f=f||window.event;c=true;a=f.clientX;d=f.clientY;this.setCapture&&this.setCapture();return false});document.onmousemove=function(h){if(c){var h=h||window.event;var g=h.clientX-a;var f=h.clientY-d;external.DragForm(g,f,b);return false}};$(document).mouseup(function(f){if(c){c=false;$(".top_rq")[0].releaseCapture();f.cancelBubble=true}});$("#ctrl_min").click(function(f){external.MinForm(b)});$("#ctrl_max").click(function(f){external.MaxForm(b)});$("#ctrl_close").click(function(f){external.CloseForm(b)});baseTools.ctrl_min=function(){external.MinForm(b)};baseTools.ctrl_max=function(){external.MaxForm(b)};baseTools.ctrl_close=function(){external.CloseForm(b)}}});